<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="author" content="Szymon Stepniak"><meta name="robots" content="index, follow"><meta name="keywords" content="groovy,compiler-configuration,compile-static,annotation,ast"><title>How to remove any class annotation with Groovy compiler configuration script?</title><meta name="description" content="One of the most interesting Groovy features is its ability to configure advanced compiler[1] options using DSL script. It becomes handy when you want to apply some global modifications to all Groovy"><meta property="og:type" content="article"><meta property="og:title" content="How to remove any class annotation with Groovy compiler configuration script?"><meta property="og:url" content="https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/"><meta property="og:site_name" content="Szymon Stepniak - I want to help you to become a better software developer"><meta property="og:description" content="One of the most interesting Groovy features is its ability to configure advanced compiler[1] options using DSL script. It becomes handy when you want to apply some global modifications to all Groovy"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2019-02-19T18:14:38.000Z"><meta property="article:modified_time" content="2019-02-20T13:08:23.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="groovy"><meta property="article:tag" content="compiler-configuration"><meta property="article:tag" content="compile-static"><meta property="article:tag" content="annotation"><meta property="article:tag" content="ast"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wololock"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="canonical" href="https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,700;1,400;1,700&amp;family=Lora:ital,wght@0,400;0,700;1,400;1,700&amp;family=Montserrat:wght@300;400;700&amp;family=DM+Mono:wght@400;500&amp;family=Poppins:wght@500;700;800&amp;family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous"><link rel="stylesheet" href="/css/main.css?v=76"><link rel="stylesheet" href="/css/highlight.css?v=76"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://e.printstacktrace.blog/#/schema/person/wololock","name":"Szymon Stepniak","description":"I want to help you to become a better software developer.","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/#avatar","inLanguage":"en-US","url":"https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200","caption":"Szymon Stepniak"},"logo":{"@id":"https://e.printstacktrace.blog/#avatar"},"sameAs":["https://twitter.com/wololock","https://github.com/wololock","https://stackoverflow.com/users/2194470/szymon-stepniak","https://www.youtube.com/c/eprintstacktrace"]},{"@type":"WebSite","@id":"https://e.printstacktrace.blog/#website","url":"https://e.printstacktrace.blog","name":"Szymon Stepniak - I want to help you to become a better software developer","description":"Blog about programming, created by Upwork's Top Rated freelancer, 10+ years experienced Java/Groovy developer. Contact me if you are looking for an experienced and high quality consultant."},{"@type":"WebPage","@id":"https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/#webpage","url":"https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/","name":"How to remove any class annotation with Groovy compiler configuration script?","isPartOf":{"@id":"https://e.printstacktrace.blog/#website"},"datePublished":"2019-02-19T18:14:38.000Z","dateModified":"2019-02-20T13:08:23.000Z","description":"\nOne of the most interesting Groovy features is its ability to configure advanced compiler[1] options using DSL script.\nIt becomes handy when you want to apply some global modifications to all Groovy classes.\n(For instance, you want to add @CompileStatic annotation to all classes, without applying changes to the source code).\nIn most cases, you want to add something to the existing source code, e.g., classes imports or useful annotations, but what if we want to remove one annotation or another?\n","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/"]}]},{"@type":"Article","@id":"https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/#article","isPartOf":{"@id":"https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/#webpage"},"author":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"headline":"How to remove any class annotation with Groovy compiler configuration script?","datePublished":"2019-02-19T18:14:38.000Z","dateModified":"2019-02-20T13:08:23.000Z","mainEntityOfPage":{"@id":"https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/#webpage"},"publisher":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"keywords":"groovy,compiler-configuration,compile-static,annotation,ast","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/#primaryimage","url":"https://e.printstacktrace.blog/images/cards/37.png","inLanguage":"en-US","caption":"How to remove any class annotation with Groovy compiler configuration script?"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://e.printstacktrace.blog"},{"@type":"ListItem","position":2,"name":"Groovy Cookbook","item":"https://e.printstacktrace.blog/groovy-cookbook/"},{"@type":"ListItem","position":3,"name":"How to remove any class annotation with Groovy compiler configuration script?"}]}]}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Szymon Stepniak - I want to help you to become a better software developer" type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body><header class="fixed-top" id="header"><div class="container"><nav class="navbar navbar-expand-lg px-0 py-lg-0 navbar-dark"><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarLinks" aria-controls="navbarLinks"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarLinks"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link gatr" href="/" data-type="nav" data-name="Home">Home</a></li><li class="nav-item"><a class="nav-link gatr" href="/about/" data-type="nav" data-name="About Me">About Me</a></li><li class="nav-item"><a class="nav-link gatr" href="/youtube/" target="_blank" data-type="nav" data-name="Videos">Videos</a></li><li class="nav-item"><a class="nav-link gatr" href="/archives/" data-type="nav" data-name="Archives">Archives</a></li><li class="nav-item"><a class="nav-link gatr" href="/resources/" data-type="nav" data-name="Resources">Resources</a></li><li class="nav-item"><a class="nav-link gatr" href="/upwork/" target="_blank" data-type="nav" data-name="Hire me">Hire me</a></li></ul></div></nav></div></header><div id="pageprogress"><div class="bar"></div></div><main id="main"><article class="post"><div class="jumbotron pt-lg-5 pb-1"><div class="container pt-lg-5"><div class="row py-5"><div class="order-0 col-lg-12"><div class="pr-lg-5"><p class="subtitle m-0 p-0"><a class="category" href="/groovy-cookbook/">Groovy Cookbook</a></p><h1 class="mt-0 mb-2">How to remove any class annotation with Groovy compiler configuration script?</h1><div class="lead my-4"><div class="paragraph"><p>One of the most interesting Groovy features is its ability to configure advanced compiler<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> options using DSL script. It becomes handy when you want to apply some global modifications to all Groovy classes. (For instance, you want to add <code>@CompileStatic</code> annotation to all classes, without applying changes to the source code). In most cases, you want to add something to the existing source code, e.g., classes imports or useful annotations, but what if we want to remove one annotation or another?</p></div></div><ul class="post-meta-extended"><li class="d-none d-lg-inline-block"><a href="/about"><img class="rounded-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="52" width="52" style="margin-top:-24px"></a></li><li><div class="small">Author</div><div class="font-weight-bold"><a href="/about">Szymon Stepniak</a></div></li><li><div class="small">Published</div><div class="font-weight-bold"><time datetime="2019-02-19T18:14:38.000Z">Feb 19, 2019</time></div></li><li><div class="small">Reading time</div><div class="font-weight-bold">7 minutes</div></li><li><div class="small">Discussion</div><div class="font-weight-bold"><a href="https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/#disqus_thread">0 Comments</a></div></li></ul></div></div></div></div></div><div class="container py-5"><a id="more"></a><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">Kudos to <a target="_blank" rel="noopener" href="https://twitter.com/sbglasius">SÃ¸ren Glasius</a> who brought the question about removing annotations at the compile time to the <strong>Groovy Community Slack</strong>!<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></td></tr></table></div><div class="sect1"><h2 id="introduction">Introduction</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s start by defining a simple example. Imagine you work with a Groovy code base, and all classes are annotated with the <code>@CompileStatic</code> annotation. It&#8217;s an excellent practice to favor <strong>static compilation</strong> over the dynamic one if we don&#8217;t use Groovy&#8217;s dynamic language capabilities. However, let&#8217;s say that at some point we need to compile the same source code with a static compilation disabled. There are various ways to do it. We could temporarily remove all annotations from the code, but it doesn&#8217;t sound like a good solution. Instead, let&#8217;s use a compiler configuration script to do it for us (without making a single change to the source code).</p></div></div></div><div class="sect1"><h2 id="an-example">An example</h2><div class="sectionbody"><div class="paragraph"><p>We use a simple <code>Person</code> class to illustrate the use case.</p></div><div class="listingblock"><div class="title">Listing 1. Person.groovy</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import groovy.transform.CompileStatic

@CompileStatic
class Person &#123;
    private String firstName
    private String lastName

    String introduceYourself() &#123;
        "$&#123;firstName&#125; $&#123;lastName&#125;"
    &#125;

    String greet(Person person) &#123;
        "$&#123;introduceYourself()&#125; greets $&#123;person.introduceYourself()&#125;"
    &#125;

    static void main(String[] args) &#123;
        def joe = new Person(firstName: "Joe", lastName: "Doe")
        def mark = new Person(firstName: "Mark", lastName: "Smith")

        println joe.greet(mark)
    &#125;
&#125;</code></pre></div></div><div class="paragraph"><p>As you can see this class uses static compilation, so when we compile it, we get a bytecode that is an equivalent of the following Java code.</p></div><div class="listingblock"><div class="title">Listing 2. Decompiled Person.class file</div><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by Fernflower decompiler)
//

import groovy.lang.GroovyObject;
import groovy.lang.MetaClass;
import org.codehaus.groovy.runtime.DefaultGroovyMethods;
import org.codehaus.groovy.runtime.GStringImpl;
import org.codehaus.groovy.runtime.ScriptBytecodeAdapter;
import org.codehaus.groovy.runtime.typehandling.ShortTypeHandling;

public class Person implements GroovyObject &#123;
    private String firstName;
    private String lastName;

    public Person() &#123;
        MetaClass var1 = this.$getStaticMetaClass();
        this.metaClass = var1;
    &#125;

    public String introduceYourself() &#123;
        return (String)ShortTypeHandling.castToString(new GStringImpl(new Object[]&#123;this.firstName, this.lastName&#125;, new String[]&#123;"", " ", ""&#125;));
    &#125;

    public String greet(Person person) &#123;
        return (String)ShortTypeHandling.castToString(new GStringImpl(new Object[]&#123;this.introduceYourself(), person.introduceYourself()&#125;, new String[]&#123;"", " greets ", ""&#125;));
    &#125;

    public static void main(String... args) &#123;
        Person var1 = new Person();
        String var2 = "Joe";
        ScriptBytecodeAdapter.setGroovyObjectProperty(var2, Person.class, var1, (String)"firstName");
        String var3 = "Doe";
        ScriptBytecodeAdapter.setGroovyObjectProperty(var3, Person.class, var1, (String)"lastName");
        Person var5 = new Person();
        String var6 = "Mark";
        ScriptBytecodeAdapter.setGroovyObjectProperty(var6, Person.class, var5, (String)"firstName");
        String var7 = "Smith";
        ScriptBytecodeAdapter.setGroovyObjectProperty(var7, Person.class, var5, (String)"lastName");
        DefaultGroovyMethods.println(Person.class, var1.greet(var5));
        Object var10000 = null;
    &#125;
&#125;</code></pre></div></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">I use Groovy 2.5.6 version in this example. Depending on Groovy version, the output bytecode represented as a Java code may look differently.</td></tr></table></div></div></div><div class="sect1"><h2 id="using-compiler-configuration-script">Using compiler configuration script</h2><div class="sectionbody"><div class="paragraph"><p>A Groovy compiler allows us to use the <strong>compiler configuration script</strong> to add some useful features. For instance, if we would like to add <code>@CompileStatic</code> annotation to all classes, we would create a <code>config.groovy</code> script like the one below.</p></div><div class="listingblock"><div class="title">Listing 3. config.groovy</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">withConfig(configuration) &#123;
    ast(groovy.transform.CompileStatic)
&#125;</code></pre></div></div><div class="paragraph"><p>Now, all we have to do is to use <code>--configscript</code> switch to enable our custom compiler configuration.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">groovyc --configscript config.groovy Person.groovy</code></pre></div></div><div class="paragraph"><p>OK, so we know how to add an annotation - let&#8217;s see how we can remove one from all Groovy classes. We need to create an AST transformation customizer, but instead of creating a new class that extends <code>org.codehaus.groovy.control.customizers.ASTTransformationCustomizer</code> class we are going to use <code>inline</code> directive that allows us using a closure directly in the configuration script instead.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import org.codehaus.groovy.ast.ClassNode
import org.codehaus.groovy.classgen.GeneratorContext
import org.codehaus.groovy.control.SourceUnit

withConfig(configuration) &#123;
    inline(phase:'CONVERSION') &#123; SourceUnit source, GeneratorContext context, ClassNode classNode -&gt; <i class="conum" data-value="1"></i><b>(1)</b>
        context.compileUnit.classes.each &#123; clazz -&gt; <i class="conum" data-value="2"></i><b>(2)</b>
            clazz.annotations.removeAll &#123; antn -&gt; antn.classNode.name  == 'CompileStatic' &#125; <i class="conum" data-value="3"></i><b>(3)</b>
        &#125;
    &#125;
&#125;</code></pre></div></div><div class="paragraph"><p>In this compiler configuration, <em class="conum" data-value="1"></em> we attach our customizer to the <code>CompilePhase.CONVERSION</code> phase<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup> - the phase that is responsible for creating an abstract syntax tree (AST). <em class="conum" data-value="2"></em> We take the compilation unit to access all Groovy classes from our source code. <em class="conum" data-value="3"></em> Then for each class node, we remove <code>@CompileStatic</code> annotation. Thanks to this we have a chance to modify the source unit before it gets analyzed and compiled. If we take a compiled class file and we decompile it, we get a bytecode represented as the following Java code equivalent.</p></div><div class="listingblock"><div class="title">Listing 4. Decompiled Person.class file (the one compiled without static compilation)</div><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by Fernflower decompiler)
//

import groovy.lang.GroovyObject;
import groovy.lang.MetaClass;
import org.codehaus.groovy.runtime.BytecodeInterface8;
import org.codehaus.groovy.runtime.GStringImpl;
import org.codehaus.groovy.runtime.ScriptBytecodeAdapter;
import org.codehaus.groovy.runtime.callsite.CallSite;
import org.codehaus.groovy.runtime.typehandling.ShortTypeHandling;

public class Person implements GroovyObject &#123;
    private String firstName;
    private String lastName;

    public Person() &#123;
        CallSite[] var1 = $getCallSiteArray();
        super();
        MetaClass var2 = this.$getStaticMetaClass();
        this.metaClass = var2;
    &#125;

    public String introduceYourself() &#123;
        CallSite[] var1 = $getCallSiteArray();
        return (String)ShortTypeHandling.castToString(new GStringImpl(new Object[]&#123;this.firstName, this.lastName&#125;, new String[]&#123;"", " ", ""&#125;));
    &#125;

    public String greet(Person person) &#123;
        CallSite[] var2 = $getCallSiteArray();
        return !__$stMC &amp;&amp; !BytecodeInterface8.disabledStandardMetaClass() ? (String)ShortTypeHandling.castToString(new GStringImpl(new Object[]&#123;this.introduceYourself(), var2[2].call(person)&#125;, new String[]&#123;"", " greets ", ""&#125;)) : (String)ShortTypeHandling.castToString(new GStringImpl(new Object[]&#123;var2[0].callCurrent(this), var2[1].call(person)&#125;, new String[]&#123;"", " greets ", ""&#125;));
    &#125;

    public static void main(String... args) &#123;
        CallSite[] var1 = $getCallSiteArray();
        Object joe = var1[3].callConstructor(Person.class, ScriptBytecodeAdapter.createMap(new Object[]&#123;"firstName", "Joe", "lastName", "Doe"&#125;));
        Object mark = var1[4].callConstructor(Person.class, ScriptBytecodeAdapter.createMap(new Object[]&#123;"firstName", "Mark", "lastName", "Smith"&#125;));
        var1[5].callStatic(Person.class, var1[6].call(joe, mark));
    &#125;
&#125;</code></pre></div></div><div class="paragraph"><p>You see the difference. Compiling the same Groovy class produced the same bytecode as if we remove <code>@CompileStatic</code> annotation from the source file.</p></div></div></div><div class="sect1"><h2 id="imported-annotation-vs-fully-qualified-name">Imported annotation vs. fully qualified name</h2><div class="sectionbody"><div class="paragraph"><p>There is one corner case worth explaining. You have seen in the previous example that we can access annotation name through the <code>ClassNode</code> field of <code>AnnotatedNode</code> class. We silently assumed that all annotations use imports and simple names like <code>@CompileStatic that</code>. However, that is not always true, and you may find yourself in a situation where the same annotation is added using the qualified name <code>@groovy.transform.CompileStatic</code>. It affects our compiler script significantly because this annotation cannot be found using its simple name - <code>classNode.name</code> in this case returns <code>groovy.transform.CompileStatic</code>.</p></div><div class="paragraph"><p>How to deal with that? We could define a predicate that searches for both names, a simple and qualified one.</p></div><div class="listingblock"><div class="title">Listing 5. Predicate that gets satisifed by simple and qualified <code>@CompileStatic</code> annotation name</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">&#123; antn -&gt; antn.classNode.name in ['CompileStatic', 'groovy.transform.CompileStatic'] &#125;</code></pre></div></div><div class="paragraph"><p>Alternatively, we could <em>"unqualify"</em> all annotation names using <code>tokenize()</code> and capturing the last segment - just in case one of the classes is annotated using qualified annotation name.</p></div><div class="listingblock"><div class="title">Listing 6. Groovy compiler script that supports qualified and simple annotation names</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import org.codehaus.groovy.ast.ClassNode
import org.codehaus.groovy.classgen.GeneratorContext
import org.codehaus.groovy.control.SourceUnit

withConfig(configuration) &#123;
    inline(phase:'CONVERSION') &#123; SourceUnit source, GeneratorContext context, ClassNode classNode -&gt;
        context.compileUnit.classes.each &#123; ClassNode clazz -&gt;
            clazz.annotations.removeAll &#123; antn -&gt; antn.classNode.name.tokenize(/./).last() == 'CompileStatic' &#125;
        &#125;
    &#125;
&#125;</code></pre></div></div><div class="paragraph"><p>Choose whatever works for you better.</p></div></div></div><div class="sect1"><h2 id="conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>I hope you have learned something useful from this blog post. A Groovy compiler configuration script gives you a lot of different options to customize a compiler behavior. If you want to learn more about it, check the official Groovy documentation<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup> for more examples. See you next time!</p></div></div></div><div id="footnotes"><hr><div class="footnote" id="_footnotedef_1"><a href="#_footnoteref_1">1</a>. <a target="_blank" rel="noopener" href="http://docs.groovy-lang.org/latest/html/documentation/tools-groovyc.html" class="bare">http://docs.groovy-lang.org/latest/html/documentation/tools-groovyc.html</a></div><div class="footnote" id="_footnotedef_2"><a href="#_footnoteref_2">2</a>. <a target="_blank" rel="noopener" href="https://groovycommunity.com/" class="bare">https://groovycommunity.com/</a></div><div class="footnote" id="_footnotedef_3"><a href="#_footnoteref_3">3</a>. <a target="_blank" rel="noopener" href="http://docs.groovy-lang.org/latest/html/api/org/codehaus/groovy/control/CompilePhase.html" class="bare">http://docs.groovy-lang.org/latest/html/api/org/codehaus/groovy/control/CompilePhase.html</a></div><div class="footnote" id="_footnotedef_4"><a href="#_footnoteref_4">4</a>. <a target="_blank" rel="noopener" href="http://groovy-lang.org/dsls.html#_customizer_builder" class="bare">http://groovy-lang.org/dsls.html#_customizer_builder</a></div></div></div></article><section id="share"><div class="container pb-5"><div class="row justify-content-between align-items-center"><div class="col-lg"><p class="font-size-5 text-uppercase mb-0">Did you like this article?</p><h3 class="mb-lg-0 mt-0">Consider buying me a coffee</h3></div><div class="col-auto buttons"><div class="pt-lg-4"><a class="align-middle mr-2 gatr" href="/buy-me-a-coffee/" target="_blank"><img data-lazy="/images/buy-me-a-coffee.png" height="32"></a><iframe class="align-middle gatr" src="https://github.com/sponsors/wololock/button" title="Sponsor wololock" height="35" width="116" style="border:0"></iframe></div></div></div></div></section><section id="related" data-debug="Scrolled to related posts"><div class="featured-post py-5"><div class="container py-3"><div class="row"><div class="col-12"><div class="row"><div class="col-lg-8 order-0"><div class="pr-5"><p class="subtitle m-0 p-0"><a class="category" href="/groovy-cookbook/">Groovy Cookbook</a></p><h3 class="mt-0 mb-2">Continue reading: <a href="/groovy-3-nullcheck-annotation-less-code-and-less-npe/">"Groovy 3 @NullCheck annotation - less code and less NPE"</a></h3><div class="my-4"><div class="paragraph"><p>Groovy 3 helps you write less, but more secure code. Today I want to show you one of the features added in the latest release - <code>@NullCheck</code> annotation.</p></div><a href="/groovy-3-nullcheck-annotation-less-code-and-less-npe/">Read more<i class="fas fa-arrow-right ml-2"></i></a></div><ul class="post-meta-extended"><li class="d-none d-lg-inline-block"><a href="/about"><img class="rounded-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="52" width="52" style="margin-top:-24px"></a></li><li><div class="small">Author</div><div class="font-weight-bold"><a href="/about">Szymon Stepniak</a></div></li><li><div class="small">Published</div><div class="font-weight-bold"><time datetime="2020-02-14T13:34:38.000Z">Feb 14, 2020</time></div></li><li><div class="small">Reading time</div><div class="font-weight-bold">4 minutes</div></li><li><div class="small">Discussion</div><div class="font-weight-bold"><a href="https://e.printstacktrace.blog/groovy-3-nullcheck-annotation-less-code-and-less-npe/#disqus_thread">0 Comments</a></div></li></ul></div></div><div class="col-lg-4 order-1 d-none d-lg-block"><a href="/groovy-3-nullcheck-annotation-less-code-and-less-npe/"><img class="img-fluid rounded" data-lazy="/images/cards/27.png" style="margin-bottom:-300px"></a></div></div></div></div></div></div><div class="remaining"><div class="container py-5"><div class="row"><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="4 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/39.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Why &quot;grails package&quot; executes Config.groovy file?</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/why-grails-package-exexutes-config-groovy/"></a></div></div></div><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="4 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/24.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Groovy script: closure does not modify @Field annotated variable</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/groovy-script-closure-does-not-modify-field-annotated-variable/"></a></div></div></div><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="2 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/27.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Groovy: split string and avoid getting IndexOutOfBoundsException</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/groovy-split-string-and-avoid-getting-index-out-of-bounds-exception/"></a></div></div></div></div></div></div></section><section id="comments"><div class="container py-5" data-debug="Scrolled to comments"><h2 class="disqus-comment-count" data-disqus-url="https://e.printstacktrace.blog/how-to-remove-class-annotation-groovy-compiler-configuration/">0 Comments</h2><div class="row"><div class="col-12 col-lg-3 order-lg-1 order-0"><div class="sticky-top" style="top:40px"><a class="gatr" href="https://grammarly.go2cloud.org/aff_c?offer_id=182&amp;aff_id=89563" data-type="banner" data-name="grammarly-01" target="_blank"><img class="d-none img-fluid d-lg-inline-block" data-lazy="/images/yml/grammarly-tower.png"></a></div></div><div class="col-12 col-lg-9 order-0 order-lg-0 order-1"><div id="disqus_thread"></div></div></div></div><script>const loadDisqus=e=>{var s,r;t=document,(s=t.createElement("script")).src="https://"+e+".disqus.com/embed.js",s.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(s)},disqusObserver=new IntersectionObserver(e=>{e.forEach(e=>{var t,s,r;e.intersectionRatio>0&&(t="eprintstacktrace",s=document,(r=s.createElement("script")).src="https://"+t+".disqus.com/embed.js",r.setAttribute("data-timestamp",+new Date),(s.head||s.body).appendChild(r),disqusObserver.unobserve(e.target))})});disqusObserver.observe(document.getElementById("disqus_thread"))</script></section></main><footer id="footer" data-debug="Scrolled to footer"><div class="container py-3 pt-5"><div class="row"><div class="col-12 col-lg-3"><h5>Popular categories</h5><ul class="list-unstyled list-categories"><li class="mb-2"><a class="gatr" href="/groovy-cookbook/" data-type="footer-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2 text-muted small">30</span></a></li><li class="mb-2"><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="footer-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2 text-muted small">9</span></a></li><li class="mb-2"><a class="gatr" href="/programmers-bookshelf/" data-type="footer-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2 text-muted small">6</span></a></li><li class="mb-2"><a class="gatr" href="/micronaut-cookbook/" data-type="footer-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2 text-muted small">5</span></a></li><li class="mb-2"><a class="gatr" href="/ratpack-cookbook/" data-type="footer-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/learning-java/" data-type="footer-category" data-name="Learning Java">Learning Java<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/jq-cookbook/" data-type="footer-category" data-name="jq cookbook">jq cookbook<span class="count ml-2 text-muted small">3</span></a></li><li class="mb-2"><a class="gatr" href="/how-to/" data-type="footer-category" data-name="How to">How to<span class="count ml-2 text-muted small">3</span></a></li><li class="mb-2"><a class="gatr" href="/blog-reports/" data-type="footer-category" data-name="Blog Reports">Blog Reports<span class="count ml-2 text-muted small">2</span></a></li></ul></div><div class="col-12 col-lg-5 latest-posts"><h5 class="mb-4">Latest posts</h5><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/things-you-might-dont-know-about-micronaut-framework/" data-type="latest-sidebar" data-name="Things You Might Don't Know About Micronaut Framework"><img class="rounded" src="/images/icons/the-mn-files.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/things-you-might-dont-know-about-micronaut-framework/" data-type="latest-sidebar" data-name="Things You Might Don't Know About Micronaut Framework">Things You Might Don't Know About Micronaut Framework</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2022-07-28T08:22:54.000Z">July 28, 2022</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/things-you-might-dont-know-about-micronaut-framework/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/these-10-new-features-make-groovy-4-0-awesome/" data-type="latest-sidebar" data-name="These 10 New Features Make Groovy 4.0 AWESOME!"><img class="rounded" src="/images/icons/groovy-4.0.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/these-10-new-features-make-groovy-4-0-awesome/" data-type="latest-sidebar" data-name="These 10 New Features Make Groovy 4.0 AWESOME!">These 10 New Features Make Groovy 4.0 AWESOME!</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2022-04-14T12:38:23.000Z">April 14, 2022</time></li><li>8 min. read</li><li><a href="https://e.printstacktrace.blog/these-10-new-features-make-groovy-4-0-awesome/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/how-to-generate-random-password-in-groovy/" data-type="latest-sidebar" data-name="How to generate a random password in Groovy?"><img class="rounded" src="/images/icons/28.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/how-to-generate-random-password-in-groovy/" data-type="latest-sidebar" data-name="How to generate a random password in Groovy?">How to generate a random password in Groovy?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2022-02-14T11:44:06.000Z">February 14, 2022</time></li><li>2 min. read</li><li><a href="https://e.printstacktrace.blog/how-to-generate-random-password-in-groovy/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/merging-json-files-recursively-in-the-command-line/" data-type="latest-sidebar" data-name="Merging JSON files recursively in the command-line"><img class="rounded" src="/images/icons/jq-merge-json.jpg" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/merging-json-files-recursively-in-the-command-line/" data-type="latest-sidebar" data-name="Merging JSON files recursively in the command-line">Merging JSON files recursively in the command-line</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-11-05T22:14:35.000Z">November 5, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/merging-json-files-recursively-in-the-command-line/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/jenkins-declarative-pipeline-dynamic-agent/" data-type="latest-sidebar" data-name="Jenkins Declarative Pipeline with the dynamic agent - how to configure it?"><img class="rounded" src="/images/icons/50.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/jenkins-declarative-pipeline-dynamic-agent/" data-type="latest-sidebar" data-name="Jenkins Declarative Pipeline with the dynamic agent - how to configure it?">Jenkins Declarative Pipeline with the dynamic agent - how to configure it?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-09-27T07:32:11.000Z">September 27, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/jenkins-declarative-pipeline-dynamic-agent/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)"><img class="rounded" src="/images/icons/3.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)">Groovy Ecosystem Usage Report (2020)</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-09-13T05:40:19.000Z">September 13, 2020</time></li><li>4 min. read</li><li><a href="https://e.printstacktrace.blog/groovy-ecosystem-usage-report-2020/#disqus_thread">0 Comments</a></li></ul></div></div></div></div><div class="col-12 col-lg-4"><h5>Popular tags</h5><div class="tags-cloud"><a href="/t/affiliate/" style="font-size:.8em;color:#6881a5">affiliate</a> <a href="/t/async/" style="font-size:.8em;color:#778196">async</a> <a href="/t/benchmark/" style="font-size:.8em;color:#6f819d">benchmark</a> <a href="/t/book/" style="font-size:.8em;color:#6081ac">book</a> <a href="/t/cicd/" style="font-size:.8em;color:#5082ba">cicd</a> <a href="/t/curl/" style="font-size:.8em;color:#6f819d">curl</a> <a href="/t/devops/" style="font-size:.8em;color:#5882b3">devops</a> <a href="/t/docker/" style="font-size:.8em;color:#6f819d">docker</a> <a href="/t/github/" style="font-size:.8em;color:#778196">github</a> <a href="/t/graalvm/" style="font-size:.8em;color:#5082ba">graalvm</a> <a href="/t/grails/" style="font-size:.8em;color:#778196">grails</a> <a href="/t/groovy/" style="font-size:.8em;color:#3982d0">groovy</a> <a href="/t/haskell/" style="font-size:.8em;color:#778196">haskell</a> <a href="/t/java/" style="font-size:.8em;color:#4182c9">java</a> <a href="/t/java-8/" style="font-size:.8em;color:#778196">java-8</a> <a href="/t/jenkins/" style="font-size:.8em;color:#4982c2">jenkins</a> <a href="/t/jenkins-pipeline/" style="font-size:.8em;color:#4982c2">jenkins-pipeline</a> <a href="/t/jmh/" style="font-size:.8em;color:#6881a5">jmh</a> <a href="/t/jq/" style="font-size:.8em;color:#6f819d">jq</a> <a href="/t/json/" style="font-size:.8em;color:#6f819d">json</a> <a href="/t/junit/" style="font-size:.8em;color:#778196">junit</a> <a href="/t/learning/" style="font-size:.8em;color:#6f819d">learning</a> <a href="/t/micronaut/" style="font-size:.8em;color:#5882b3">micronaut</a> <a href="/t/native-image/" style="font-size:.8em;color:#6881a5">native-image</a> <a href="/t/non-blocking/" style="font-size:.8em;color:#6f819d">non-blocking</a> <a href="/t/ratpack/" style="font-size:.8em;color:#5082ba">ratpack</a> <a href="/t/reactive-programming/" style="font-size:.8em;color:#778196">reactive-programming</a> <a href="/t/reading/" style="font-size:.8em;color:#778196">reading</a> <a href="/t/recursion/" style="font-size:.8em;color:#778196">recursion</a> <a href="/t/review/" style="font-size:.8em;color:#6081ac">review</a> <a href="/t/rxjava/" style="font-size:.8em;color:#778196">rxjava</a> <a href="/t/sdkman/" style="font-size:.8em;color:#6f819d">sdkman</a> <a href="/t/spock/" style="font-size:.8em;color:#6f819d">spock</a> <a href="/t/stackoverflow/" style="font-size:.8em;color:#778196">stackoverflow</a> <a href="/t/string/" style="font-size:.8em;color:#6f819d">string</a> <a href="/t/unit-test/" style="font-size:.8em;color:#6f819d">unit-test</a></div><div class="mt-5"><a class="gatr" href="https://click.linksynergy.com/deeplink?id=uow2LCEuhvQ&amp;mid=39197&amp;murl=https%3A%2F%2Fwww.udemy.com%2Ftopic%2Fdevops%2F" data-type="banner" data-name="udemy-devops-01" target="_blank"><img class="d-none img-fluid d-lg-inline-block d-md-inline-block" data-lazy="/images/yml/udemy-devops-01.png"></a></div></div></div></div><div class="border-top border-dark py-4 footer-bottom"><div class="container"><div class="justify-content-between d-flex"><div class="links"><ul><li><a class="gatr" href="/about/" data-type="footer-link" data-name="About">About</a></li><li><a class="gatr" href="/archives/" data-type="footer-link" data-name="Archives">Archives</a></li><li><a class="gatr" href="/resources/" data-type="footer-link" data-name="Resources">Resources</a></li><li><a class="gatr" href="/privacy-policy/" data-type="footer-link" data-name="Privacy Policy">Privacy Policy</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://kit.co/wololock" data-type="footer-link" data-name="My Kit">My Kit</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://feeds.feedburner.com/Eprintstacktracenet" data-type="footer-link" data-name="RSS">RSS</a></li></ul></div><div class="socials"><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://twitter.com/wololock"><i class="fa fa-twitter"></i></a></li><li><a target="_blank" rel="noopener" href="https://youtube.com/eprintstacktrace"><i class="fa fa-youtube"></i></a></li><li><a target="_blank" rel="noopener" href="https://github.com/wololock"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile"><i class="fa fa-stack-overflow"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/szymon-st%C4%99pniak-9a0b1630/"><i class="fa fa-linkedin"></i></a></li></ul></div></div></div></div></footer><script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/48c5da59c9.js" crossorigin="anonymous" async></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#5fc4ff" data-font-family="Lora,serif" data-font-size="16px" data-bg="#1d2b36"></script><script src="/js/main.js?v=12"></script><script src="/js/highlightjs/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(e,a,t,n,c,i,g){e.GoogleAnalyticsObject=c,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=a.createElement(t),g=a.getElementsByTagName(t)[0],i.async=1,i.src="//www.google-analytics.com/analytics.js",g.parentNode.insertBefore(i,g)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery(document).on("mousedown",".gatr",(function(e){var a=jQuery(this),t=a.attr("data-type"),n=a.attr("data-name"),c=1===e.which?"click":2===e.which?"middle-click":"right-click";return ga("send","event",t,c,n),!1}))</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>