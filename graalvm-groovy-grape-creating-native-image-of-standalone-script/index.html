<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="robots" content="all"><meta name="ir-site-verification-token" value="626123791"><title>GraalVM with Groovy and Grape - creating native image of a standalone script</title><meta name="keywords" content="groovy,graalvm,grape,native-image"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><link rel="canonical" href="https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:wght@400;500;700|Poppins:300,400,400i,700|Montserrat:400,600,700|Roboto:300,400,400i,700|Lora:400,400i,700,700i&amp;display=swap"><link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"><link rel="stylesheet" href="/css/main.css?v=71"><link rel="stylesheet" href="/css/highlight.css?v=71"><meta name="description" content="The Apache Groovy programming language has extraordinary scripting capabilities. When you combine it with the Grape dependency management system, it turns out that the sky is the limit. In one of the"><meta property="og:type" content="article"><meta property="og:title" content="GraalVM with Groovy and Grape - creating native image of a standalone script"><meta property="og:url" content="https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/"><meta property="og:site_name" content="e.printstacktrace.blog - I help you become a better software developer."><meta property="og:description" content="The Apache Groovy programming language has extraordinary scripting capabilities. When you combine it with the Grape dependency management system, it turns out that the sky is the limit. In one of the"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://e.printstacktrace.blog/images/cards/29.png"><meta property="article:published_time" content="2019-01-16T14:14:42.000Z"><meta property="article:modified_time" content="2019-01-19T09:34:02.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="groovy"><meta property="article:tag" content="graalvm"><meta property="article:tag" content="grape"><meta property="article:tag" content="native-image"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://e.printstacktrace.blog/images/cards/29.png"><meta name="twitter:creator" content="@wololock"><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://e.printstacktrace.blog/#/schema/person/wololock","name":"Szymon Stepniak","description":"I help you become a better software developer.","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/#avatar","inLanguage":"en-US","url":"https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200","caption":"Szymon Stepniak"},"logo":{"@id":"https://e.printstacktrace.blog/#avatar"},"sameAs":["https://twitter.com/wololock","https://github.com/wololock","https://stackoverflow.com/users/2194470/szymon-stepniak","https://www.youtube.com/c/eprintstacktrace"]},{"@type":"WebSite","@id":"https://e.printstacktrace.blog/#website","url":"https://e.printstacktrace.blog","name":"e.printstacktrace.blog - I help you become a better software developer.","description":"Blog about programming, created by Upwork's Top Rated freelancer, 10+ years experienced Java/Groovy developer. Contact me if you are looking for an experienced and high quality consultant."},{"@type":"WebPage","@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#webpage","url":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/","name":"GraalVM with Groovy and Grape - creating native image of a standalone script","isPartOf":{"@id":"https://e.printstacktrace.blog/#website"},"datePublished":"2019-01-16T14:14:42.000Z","dateModified":"2019-01-19T09:34:02.000Z","description":"\nThe Apache Groovy programming language has extraordinary scripting capabilities.\nWhen you combine it with the Grape dependency management system, it turns out that the sky is the limit.\nIn one of the previous blog posts, I explained how you can start compiling Groovy code to the native binary files, using GraalVM&#8217;s native-image compiler.\nThis time I tried to do the same with the Groovy script that uses Grape to provide an external library to the classpath.\nI thought it won&#8217;t be possible, but luckily - I was wrong. \n","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/"]}]},{"@type":"Article","@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#article","isPartOf":{"@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#webpage"},"author":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"headline":"GraalVM with Groovy and Grape - creating native image of a standalone script","datePublished":"2019-01-16T14:14:42.000Z","dateModified":"2019-01-19T09:34:02.000Z","mainEntityOfPage":{"@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#webpage"},"publisher":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"keywords":"groovy,graalvm,grape,native-image","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#primaryimage","url":"https://e.printstacktrace.blog/images/cards/29.png","inLanguage":"en-US","caption":"GraalVM with Groovy and Grape - creating native image of a standalone script"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://e.printstacktrace.blog"},{"@type":"ListItem","position":2,"name":"Groovy Cookbook","item":"https://e.printstacktrace.blog/groovy-cookbook/"},{"@type":"ListItem","position":3,"name":"GraalVM with Groovy and Grape - creating native image of a standalone script"}]}]}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="e.printstacktrace.blog - I help you become a better software developer." type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body><header class="fixed-top" id="header"><div class="container"><nav class="navbar navbar-light mx-0 px-0 justify-content-start"><a class="gatr" href="/" data-type="nav" data-name="Home">Home</a><a class="gatr" href="/about" data-type="nav" data-name="About">About</a><a class="gatr" href="/archives" data-type="nav" data-name="Archives">Archives</a><a class="gatr" href="/resources" data-type="nav" data-name="Tools &amp; Resources">Tools & Resources</a><a class="gatr" href="/support-me" data-type="nav" data-name="Support me">Support me</a></nav></div></header><main id="main"><section class="sidebar-enabled" id="content"><div class="container"><div class="row"><div class="col-lg-3 bg-primary sidebar pt-5 d-flex align-items-start flex-column order-1 pr-lg-0"><div class="mb-auto"><div class="text-center pt-lg-5 pl-3"><a href="/about"><img class="rounded-circle mb-4" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="96"></a><h5>Hi! üëã I'm Szymon</h5><p class="small">I help you become a better software developer.</p></div><div class="my-4 pl-2 text-lg-right text-center"><ul class="social-media"><li><a class="gatr" target="_blank" rel="noopener" href="https://twitter.com/wololock" data-type="social-media" data-name="Twitter" title="Twitter"><i class="fa fa-twitter"></i><span class="number">1.13k</span><span class="description">Followers</span></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://www.youtube.com/eprintstacktrace" data-type="social-media" data-name="YouTube" title="YouTube"><i class="fa fa-youtube"></i><span class="number">2.06k</span><span class="description">Subscribers</span></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://github.com/wololock" data-type="social-media" data-name="Github" title="Github"><i class="fa fa-github"></i><span class="number">103</span><span class="description">Followers</span></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://stackoverflow.com/users/2194470/szymon-stepniak" data-type="social-media" data-name="StackOverflow" title="StackOverflow"><i class="fa fa-stack-overflow"></i><span class="number">29.6k</span><span class="description">Reputation</span></a></li></ul></div><div class="pl-4 mt-lg-5 pt-lg-2"><h4 class="h4 pt-4 mb-4 sans-serif">Latest posts from the <span class="h3 font-weight-bold">Groovy Cookbook</span></h4><div class="media align-items-center pb-1 mb-3"><a class="d-block gatr" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)"><img class="rounded" src="/images/icons/3.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif gatr" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)">Groovy Ecosystem Usage Report (2020)</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block gatr" href="/how-to-merge-two-maps-in-groovy/" data-type="latest-sidebar" data-name="How to merge two maps in Groovy?"><img class="rounded" src="/images/icons/28.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif gatr" href="/how-to-merge-two-maps-in-groovy/" data-type="latest-sidebar" data-name="How to merge two maps in Groovy?">How to merge two maps in Groovy?</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block gatr" href="/groovy-dynamic-maps-generic-type-erasure-and-raw-types/" data-type="latest-sidebar" data-name="Groovy dynamic Maps, generic type erasure, and raw types - an interesting use case to learn from"><img class="rounded" src="/images/icons/15.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif gatr" href="/groovy-dynamic-maps-generic-type-erasure-and-raw-types/" data-type="latest-sidebar" data-name="Groovy dynamic Maps, generic type erasure, and raw types - an interesting use case to learn from">Groovy dynamic Maps, generic type erasure, and raw types - an...</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block gatr" href="/groovy-3-nullcheck-annotation-less-code-and-less-npe/" data-type="latest-sidebar" data-name="Groovy 3 @NullCheck annotation - less code and less NPE"><img class="rounded" src="/images/icons/6.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif gatr" href="/groovy-3-nullcheck-annotation-less-code-and-less-npe/" data-type="latest-sidebar" data-name="Groovy 3 @NullCheck annotation - less code and less NPE">Groovy 3 @NullCheck annotation - less code and less NPE</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block gatr" href="/groovy-3-string-gdk-improvements-takeright-takebetween-and-a-few-others/" data-type="latest-sidebar" data-name="Groovy 3 String GDK improvements - takeRight, takeBetween, and a few others"><img class="rounded" src="/images/icons/12.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif gatr" href="/groovy-3-string-gdk-improvements-takeright-takebetween-and-a-few-others/" data-type="latest-sidebar" data-name="Groovy 3 String GDK improvements - takeRight, takeBetween, and a few others">Groovy 3 String GDK improvements - takeRight, takeBetween, an...</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block gatr" href="/groovy-string-methods-that-will-make-your-life-groovier/" data-type="latest-sidebar" data-name="Three Groovy String methods that will make your life Groovier!"><img class="rounded" src="/images/icons/6.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif gatr" href="/groovy-string-methods-that-will-make-your-life-groovier/" data-type="latest-sidebar" data-name="Three Groovy String methods that will make your life Groovier!">Three Groovy String methods that will make your life Groovier!</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block gatr" href="/quicksort-in-groovy-can-it-be-as-fast-as-implemented-in-java/" data-type="latest-sidebar" data-name="Quicksort in Groovy - can it be as fast as implemented in Java?"><img class="rounded" src="/images/icons/41.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif gatr" href="/quicksort-in-groovy-can-it-be-as-fast-as-implemented-in-java/" data-type="latest-sidebar" data-name="Quicksort in Groovy - can it be as fast as implemented in Java?">Quicksort in Groovy - can it be as fast as implemented in Java?</a></h5></div></div><div class="text-center"><a class="view-all" href="/groovy-cookbook/" data-type="latest-sidebar" data-name="More &amp;raquo;"><span class="d-block m-0">More</span><i class="fas fa-chevron-down d-block m-0"></i></a></div></div><div class="pl-4 mt-5"><h4 class="mb-3">Popular categories</h4><ul class="list-unstyled"><li class="my-1"><a class="gatr" href="/groovy-cookbook/" data-type="sidebar-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2 mark">28</span></a></li><li class="my-1"><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="sidebar-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2 mark">9</span></a></li><li class="my-1"><a class="gatr" href="/programmers-bookshelf/" data-type="sidebar-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2 mark">6</span></a></li><li class="my-1"><a class="gatr" href="/micronaut-cookbook/" data-type="sidebar-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2 mark">4</span></a></li><li class="my-1"><a class="gatr" href="/ratpack-cookbook/" data-type="sidebar-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2 mark">4</span></a></li><li class="my-1"><a class="gatr" href="/learning-java/" data-type="sidebar-category" data-name="Learning Java">Learning Java<span class="count ml-2 mark">4</span></a></li><li class="my-1"><a class="gatr" href="/jq-cookbook/" data-type="sidebar-category" data-name="jq cookbook">jq cookbook<span class="count ml-2 mark">3</span></a></li><li class="my-1"><a class="gatr" href="/how-to/" data-type="sidebar-category" data-name="How to">How to<span class="count ml-2 mark">3</span></a></li><li class="my-1"><a class="gatr" href="/blog-reports/" data-type="sidebar-category" data-name="Blog Reports">Blog Reports<span class="count ml-2 mark">2</span></a></li></ul></div><div class="text-center"><div class="d-none d-lg-inline-block mb-5 pt-5"><a class="gatr" href="https://e.printstacktrace.blog/vidiq" data-type="banner" data-name="vidiq-02" target="_blank"><img class="img-fluid" data-lazy="/images/yml/vidiq-02.png"></a></div><div class="d-inline-block d-lg-none py-3"><a class="gatr" href="https://www.jdoqocy.com/click-100191173-10952823" data-type="banner" data-name="grammarly-02" target="_blank"><img class="img-fluid" data-lazy="/images/yml/grammarly-02.png"></a></div></div></div><div class="spread-the-love pt-4 mt-lg-5"><div class="mb-lg-5 pb-5 pl-lg-4"><h3 class="mb-3">Don't miss anything - join my newsletter</h3><p class="text-justify">Additional materials and updates for subscribers. <b>No spam guaranteed</b>.<br>Unsubscribe at any time.</p><div id="ck-5bc70426c4-box"></div><script>function load_newsletter(e){var t=document.getElementById("ck-5bc70426c4-box");if(document.contains(t)){var n=t.parentElement;t.remove();var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://tremendous-motivator-1432.ck.page/"+e+"/index.js",o.setAttribute("data-uid",e),n.appendChild(o),console.log("Convertkit "+e+" loaded.")}}window.addEventListener("scroll",function(e){var t=document.scrollingElement.scrollTop,n=document.getElementById("ck-5bc70426c4-box");document.contains(n)&&t>n.getBoundingClientRect().top- -500&&load_newsletter("5bc70426c4")})</script></div><div class="pl-lg-3 text-lg-left text-center"><p class="m-0 serif">Did you like this article?</p><h5 class="text-uppercase">Spread the <i class="fa fa-heart"></i>!</h5><ul class="mb-5"><li><a class="gatr" target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?text=GraalVM with Groovy and Grape - creating native image of a standalone script https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/ via @wololock" data-type="share" data-name="Shared on Twitter"><i class="fa fa-twitter"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://www.linkedin.com/shareArticle?url=https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/" data-type="share" data-name="Shared on LinkedIn"><i class="fa fa-linkedin"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://www.facebook.com/sharer.php?u=https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/" data-type="share" data-name="Shared on Facebook"><i class="fa fa-facebook-square"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="http://www.reddit.com/submit?url=https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/&amp;title=GraalVM with Groovy and Grape - creating native image of a standalone script" data-type="share" data-name="Shared on Reddit"><i class="fa fa-reddit"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/button/?url=https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/&amp;media=https://e.printstacktrace.blog/images/cards/29.png&amp;description=GraalVM with Groovy and Grape - creating native image of a standalone script" data-type="share" data-name="Shared on Pinterest"><i class="fa fa-pinterest"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://ko-fi.com/eprintstacktrace" data-type="share" data-name="Clicked on Ko-Fi">‚òïÔ∏è</a></li></ul></div></div></div><div class="col-lg-9 py-5 order-0"><div class="pr-lg-4 px-1 pt-lg-5"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a class="gatr" href="/" data-type="breadcrumb" data-name="/">e.printstacktrace.blog</a></li><li class="breadcrumb-item"><a class="gatr" href="/groovy-cookbook/" data-type="breadcrumb" data-name="Groovy Cookbook">Groovy Cookbook</a></li></ol></nav><article class="post-body"><h1>GraalVM with Groovy and Grape - creating native image of a standalone script</h1><div class="post-meta mb-4"><ul><li><time datetime="2019-01-16T14:14:42.000Z">January 16, 2019</time></li><li>12 min. read</li><li><a href="https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#disqus_thread">0 Comments</a></li></ul></div><div class="content"><div class="paragraph"><p>The <a target="_blank" rel="noopener" href="http://groovy-lang.org/">Apache Groovy</a> programming language has extraordinary scripting capabilities. When you combine it with the <a target="_blank" rel="noopener" href="http://docs.groovy-lang.org/latest/html/documentation/grape.html">Grape dependency management system</a>, it turns out that the sky is the limit. In one of the <a href="/graalvm-and-groovy-how-to-start/" title="previous blog posts">previous blog posts</a>, I explained how you can start compiling Groovy code to the native binary files, using GraalVM&#8217;s <code>native-image</code> compiler. This time I tried to do the same with the Groovy script that uses Grape to provide an external library to the classpath. I thought it won&#8217;t be possible, but luckily - I was wrong. <span class="icon"><i class="fa fa-smile-o"></i></span></p></div><a id="more"></a><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">The source code of the examples explained below can be found here <a target="_blank" rel="noopener" href="https://github.com/wololock/graalvm-groovy-examples/tree/master/grape-script-example">wololock/graalvm-groovy-examples</a></td></tr></table></div><div class="sect1"><h2 id="prerequisites">Prerequisites</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s start with defining runtime environment.</p></div><div class="ulist"><ul><li><p><strong>GraalVM</strong> <code>19.2.1</code></p></li><li><p><strong>Groovy</strong> <code>2.5.8</code></p></li></ul></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">I use a great command line tool called <a target="_blank" rel="noopener" href="https://sdkman.io/">SDKMAN!</a> to install both, GraalVM JDK and Groovy library. It allows me to install GraalVM with the following command: <code>sdk install java 19.2.1-grl</code> and then I can switch to this Java version for current shell session with <code>sdk use java 19.2.1-grl</code>.</td></tr></table></div></div></div><div class="sect1"><h2 id="the-code">The code</h2><div class="sectionbody"><div class="paragraph"><p>In this article, I will use a reasonably simple Groovy script. It expects a single command line argument ‚Äî a website URL, and it displays to the console the information about how many links given website contains. Nothing fancy, but you probably see how we could extend this example to do something more useful.</p></div><div class="listingblock"><div class="title">Listing 1. src/CountLinks.groovy</div><div class="content"><pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">#!groovy
import org.jsoup.Jsoup
import org.jsoup.nodes.Document

@Grab(group='org.jsoup', module='jsoup', version='1.11.3')

final String url = args[0]

final Document doc = Jsoup.connect(url).get()
final int links = doc.select("a").size()
println "Website $&#123;url&#125; contains $&#123;links&#125; links."</code></pre></div></div><div class="paragraph"><p>We can run it and see how much time it took to produce the output.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ time groovy CountLinks.groovy https://e.printstacktrace.blog
Website https://e.printstacktrace.blog contains 95 links.
groovy CountLinks.groovy https://e.printstacktrace.blog  6,29s user 0,26s system 390% cpu 1,677 total</code></pre></div></div><div class="paragraph"><p>It took around <strong>1.7 seconds</strong> to produce the result. Quite long, especially for a script that does not do much of a work. We can assume that network communication consumed around 200 milliseconds, according to <code>curl</code> results.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ time curl -o /tmp/output "https://e.printstacktrace.blog"
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 23256    0 23256    0     0  23256      0 --:--:-- --:--:-- --:--:--  118k
curl -o /tmp/output "https://e.printstacktrace.blog"  0,02s user 0,01s system 10% cpu 0,206 total</code></pre></div></div><div class="paragraph"><p>It looks like that starting JVM and running Grape dependency manager takes around 1.5 seconds in this case. Let&#8217;s try to improve the performance by executing our script as a Java compiled class.</p></div></div></div><div class="sect1"><h2 id="compiling-script-to-the-java-bytecode">Compiling script to the Java bytecode</h2><div class="sectionbody"><div class="paragraph"><p>We need to explain one important thing. Grape dependency manager has some limitations<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, and it does not work without Groovy class loader. There is a configuration annotation called <code>@GrabConfig(systemClassLoader = true)</code>, but it does not have any effect when we compile the script to a Java bytecode class file. A script containing this annotation generates the same bytecode as the one that misses it. If this annotation had any effect when running compiled bytecode as a Java program, then we could use <code>-Djava.system.class.loader</code> to specify the Groovy class loader.</p></div><div class="paragraph"><p>Here is the full Java command (with configured classpath) and the error Grape library throws because of the invalid class loader:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ java -Djava.system.class.loader=groovy.lang.GroovyClassLoader -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8/groovy-2.5.8.jar:$HOME/.m2/repository/org/apache/ivy/ivy/2.4.0/ivy-2.4.0.jar" CountLinks https://e.printstacktrace.blog

Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: java.lang.RuntimeException: No suitable ClassLoader found for grab
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	...
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.invoke(StaticMetaMethodSite.java:46)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:102)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:197)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at CountLinks.&lt;clinit&gt;(CountLinks.groovy)</code></pre></div></div><div class="paragraph"><p>However, there is a workaround we can apply. We can turn off Grape&#8217;s dependency manager with <code>-Dgroovy.grape.enabled=false</code> option, and we can add Jsoup library JAR file to the classpath manually instead. Let&#8217;s give it a shot and see what happens.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ java -Dgroovy.grape.enable=false -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8groovy-2.5.8.jar:$HOME/.groovy/grapes/org.jsoup/jsoup/jars/jsoup-1.11.3.jar" CountLinks https://e.printstacktrace.blog

Website https://e.printstacktrace.blog contains 95 links.</code></pre></div></div><div class="paragraph"><p>In this case, we only added <code>groovy-all-2.5.8.jar</code> and <code>jsoup-1.11.3.jar</code> to execute the script successfully. Measuring execution time of the compiled Java program without Grape dependency manager shown that it takes around <strong>1 second</strong> in average to produce the same output as it was before. We still suffer from JVM boot time, but we can improve in this area as well. It&#8217;s time to create GraalVM native image.</p></div></div></div><div class="sect1"><h2 id="creating-graalvm-native-image">Creating GraalVM native image</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s use the existing <code>CountLinks.class</code> file to create a GraalVM native image from it. We need two JSON files containing reflection configuration for GraalVM. The first one <a target="_blank" rel="noopener" href="https://gist.github.com/wololock/e99d748e724bf5ae6ce930c1b8cb9a90">can be found here</a>, and it contains a configuration of all dynamically generated runtime methods for Groovy 2.5.8. The second one contains only Groovy script class we created.</p></div><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content">You can also generate <code>dgm.json</code> file on your own <a target="_blank" rel="noopener" href="https://gist.github.com/wololock/ac83a8196a8252fbbaacf4ac84e10b36">using the following Groovy script</a>.</td></tr></table></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">I would recommend using <code>native-image-agent</code> as explained in the previous blog post. It makes generating reflections JSON as easy as running a simple Java application.</td></tr></table></div><div class="listingblock"><div class="title">Listing 2. src/countlinks.json</div><div class="content"><pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">[
  &#123;
    "name": "CountLinks",
    "allDeclaredConstructors": true,
    "allPublicConstructors": true,
    "allDeclaredMethods": true,
    "allPublicMethods": true
  &#125;
]</code></pre></div></div><div class="listingblock"><div class="title">Listing 3. Creating native image</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ native-image -Dgroovy.grape.enable=false \
    --no-server \
    --allow-incomplete-classpath \
    --no-fallback \
    --report-unsupported-elements-at-runtime \
    --initialize-at-build-time \
    --initialize-at-run-time=org.codehaus.groovy.control.XStreamUtils,groovy.grape.GrapeIvy \
    -H:ConfigurationFileDirectories=out/conf/ \
    --enable-url-protocols=http,https \
    -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8/groovy-2.5.8.jar:$HOME/.groovy/grapes/org.jsoup/jsoup/jars/jsoup-1.11.3.jar" \
    CountLinks

[countlinks:305]    classlist:   2,110.17 ms
[countlinks:305]        (cap):     998.28 ms
[countlinks:305]        setup:   2,746.31 ms
[countlinks:305]   (typeflow):  47,883.31 ms
[countlinks:305]    (objects): 107,634.87 ms
[countlinks:305]   (features):   1,475.31 ms
[countlinks:305]     analysis: 158,631.80 ms
[countlinks:305]     universe:   1,639.31 ms
[countlinks:305]      (parse):   5,070.39 ms
[countlinks:305]     (inline):   4,234.00 ms
[countlinks:305]    (compile):  34,543.96 ms
[countlinks:305]      compile:  46,402.57 ms
[countlinks:305]        image:  10,556.78 ms
[countlinks:305]        write:   1,365.01 ms
[countlinks:305]      [total]: 223,632.13 ms</code></pre></div></div><div class="paragraph"><p>The native image generation succeeds. Let&#8217;s run it.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ ./countlinks https://e.printstacktrace.blog

Exception in thread "main" groovy.lang.MissingMethodException: No signature of method: static org.codehaus.groovy.runtime.InvokerHelper.runScript() is applicable for argument types: (Class, [Ljava.lang.String;) values: [class CountLinks, [https://e.printstacktrace.blog]]
	at groovy.lang.MetaClassImpl.invokeStaticMissingMethod(MetaClassImpl.java:1528)
	at groovy.lang.MetaClassImpl.invokeStaticMethod(MetaClassImpl.java:1514)
	at org.codehaus.groovy.runtime.callsite.StaticMetaClassSite.call(StaticMetaClassSite.java:52)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:136)
	at CountLinks.main(CountLinks.groovy)</code></pre></div></div><div class="paragraph"><p>No luck. GraalVM throws this exception because at the current stage of the development<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> it is not possible to invoke any Groovy script class that is not statically compiled. Let&#8217;s fix it. We use compiler configuration script file named <code>compiler.groovy</code>. It adds static compilation and type checking.</p></div><div class="listingblock"><div class="title">Listing 4. src/compiler.groovy</div><div class="content"><pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">withConfig(configuration) &#123;
    ast(groovy.transform.CompileStatic)
    ast(groovy.transform.TypeChecked)
&#125;</code></pre></div></div><div class="paragraph"><p>Let&#8217;s recompile the code using compiler configuration script.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ groovyc --configscript=compiler.groovy CountLinks.groovy

org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
CountLinks.groovy: 7: [Static type checking] - The variable [args] is undeclared.
 @ line 7, column 20.
   final String url = args[0]
                      ^

1 error</code></pre></div></div><div class="paragraph"><p>Bad luck. The error thrown by the static type checking says that there is no args variable available. We need to modify our initial script to make args variable available.</p></div><div class="listingblock"><div class="title">Listing 5. src/CountLinks.groovy</div><div class="content"><pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">#!groovy
import org.jsoup.Jsoup
import org.jsoup.nodes.Document

@Grab(group='org.jsoup', module='jsoup', version='1.11.3')

final String[] args = getProperty("args") as String[]
final String url = args[0]

final Document doc = Jsoup.connect(url).get()
final int links = doc.select("a").size()
println "Website $&#123;url&#125; contains $&#123;links&#125; links."</code></pre></div></div><div class="paragraph"><p>Before we create a native image, let&#8217;s run this statically compiled Groovy script as a Java program to see if it makes any difference comparing to the previous example. It is not a bulletproof benchmark, but it looks like the new bytecode executes in around 830 milliseconds.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ time java -Dgroovy.grape.enable=false -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8/groovy-2.5.8.jar:$HOME/.groovy/grapes/org.jsoup/jsoup/jars/jsoup-1.11.3.jar" CountLinks https://e.printstacktrace.blog
Website https://e.printstacktrace.blog contains 95 links.
java -Dgroovy.grape.enable=false -cp  CountLinks   2,59s user 0,13s system 330% cpu 0,823 total</code></pre></div></div><div class="paragraph"><p>Let&#8217;s recreate the native image.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ native-image -Dgroovy.grape.enable=false \
    --no-server \
    --allow-incomplete-classpath \
    --no-fallback \
    --report-unsupported-elements-at-runtime \
    --initialize-at-build-time \
    --initialize-at-run-time=org.codehaus.groovy.control.XStreamUtils,groovy.grape.GrapeIvy \
    -H:ConfigurationFileDirectories=out/conf/ \
    --enable-url-protocols=http,https \
    -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8/groovy-2.5.8.jar:$HOME/.groovy/grapes/org.jsoup/jsoup/jars/jsoup-1.11.3.jar" \
    CountLinks

[countlinks:17259]    classlist:   1,989.96 ms
[countlinks:17259]        (cap):     989.83 ms
[countlinks:17259]        setup:   2,380.31 ms
[countlinks:17259]   (typeflow):  42,717.13 ms
[countlinks:17259]    (objects): 105,959.35 ms
[countlinks:17259]   (features):   1,133.75 ms
[countlinks:17259]     analysis: 151,461.35 ms
[countlinks:17259]     universe:   1,489.67 ms
[countlinks:17259]      (parse):   4,564.73 ms
[countlinks:17259]     (inline):   4,501.88 ms
[countlinks:17259]    (compile):  33,623.14 ms
[countlinks:17259]      compile:  45,452.90 ms
[countlinks:17259]        image:   9,294.79 ms
[countlinks:17259]        write:     743.83 ms
[countlinks:17259]      [total]: 212,978.90 ms</code></pre></div></div><div class="paragraph"><p>And let&#8217;s run it.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="text" class="language-text hljs">$ time ./countlinks https://e.printstacktrace.blog

WARNING: The sunec native library, required by the SunEC provider, could not be loaded. This library is usually shipped as part of the JDK and can be found under &lt;JAVA_HOME&gt;/jre/lib/&lt;platform&gt;/libsunec.so. It is loaded at run time via System.loadLibrary("sunec"), the first time services from SunEC are accessed. To use this provider's services the java.library.path system property needs to be set accordingly to point to a location that contains libsunec.so. Note that if java.library.path is not set it defaults to the current working directory.
Exception in thread "main" org.codehaus.groovy.runtime.InvokerInvocationException: java.lang.UnsatisfiedLinkError: sun.security.ec.ECDSASignature.verifySignedDigest([B[B[B[B)Z [symbol: Java_sun_security_ec_ECDSASignature_verifySignedDigest or Java_sun_security_ec_ECDSASignature_verifySignedDigest___3B_3B_3B_3B]
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:111)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:326)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1235)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:1018)
	at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:1001)
	at org.codehaus.groovy.runtime.InvokerHelper.runScript(InvokerHelper.java:423)
	at CountLinks.main(CountLinks.groovy)
Caused by: java.lang.UnsatisfiedLinkError: sun.security.ec.ECDSASignature.verifySignedDigest([B[B[B[B)Z [symbol: Java_sun_security_ec_ECDSASignature_verifySignedDigest or Java_sun_security_ec_ECDSASignature_verifySignedDigest___3B_3B_3B_3B]
	at com.oracle.svm.jni.access.JNINativeLinkage.getOrFindEntryPoint(JNINativeLinkage.java:145)
	at com.oracle.svm.jni.JNIGeneratedMethodSupport.nativeCallAddress(JNIGeneratedMethodSupport.java:54)</code></pre></div></div><div class="paragraph"><p>Another error. We already used to it, right? :) This time the error we see is entirely expected. GraalVM does not support HTTPS protocol by default<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup>, that is why we had to add <code>--enable-url-protocols=https</code>. However, the image we have built does not include required native library. It tries to load it, but it uses the current working directory, and it fails. The solution is simple - we need to add <code>-Djava.library.path</code> in the command line, and we are good to go.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ time ./countlinks -Djava.library.path=$JAVA_HOME/jre/lib/amd64 https://e.printstacktrace.blog
Website https://e.printstacktrace.blog contains 95 links.
./countlinks -Djava.library.path=$JAVA_HOME/jre/lib/amd64   0,02s user 0,01s system 18% cpu 0,196 total</code></pre></div></div><div class="paragraph"><p>Finally! <strong>It worked!</strong> Running the program several times shows that the average execution time is around <strong>200 ms</strong> (the best time recorded: <strong>151 ms</strong>). Our program is still affected by network latency, but this is something we cannot do anything with. However, we reduced the total execution time from <strong>1.7 s</strong> to <strong>0.2 s</strong>, using almost the same script (we only have to apply the changes required by static compilation).</p></div><script id="asciicast-Q4kI1S3hKDfTvGBOdgkAIAv0q" src="https://asciinema.org/a/Q4kI1S3hKDfTvGBOdgkAIAv0q.js" async></script></div></div><div class="sect1"><h2 id="conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>Groovy and Grape dependency management is a powerful pair of tools. And even if we can&#8217;t use Grape directly in the Java program, or we can&#8217;t invoke dynamic Groovy script in the GraalVM, we can still use almost the same bytecode and generate a standalone native image to remove the cost of the JVM boot and Grape dependency check.</p></div><div class="paragraph"><p>Of course, these benefits don&#8217;t come without a cost. The size of the generated native image is 50 MB, while the total size of the Groovy script, and the two JAR dependencies it uses is around 5,6 MB. Also, the Groovy script you may want to compile to the native image might require some reworking to make it compatible with static compilation. So for some of the scripts, this might be not possible to do.</p></div><div class="paragraph"><p>I hope you&#8217;ve enjoyed reading this article, and you&#8217;ve learned something useful from it. Please share your thoughts in the comments section below. I would love to hear your opinion.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">Continue reading - <a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/" title="GraalVM native image inside docker container - does it make sense?">GraalVM native image inside docker container - does it make sense?</a></td></tr></table></div></div></div><div id="footnotes"><hr><div class="footnote" id="_footnotedef_1"><a href="#_footnoteref_1">1</a>. <a target="_blank" rel="noopener" href="https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md" class="bare">https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md</a></div><div class="footnote" id="_footnotedef_2"><a href="#_footnoteref_2">2</a>. <a target="_blank" rel="noopener" href="https://github.com/oracle/graal/issues/708" class="bare">https://github.com/oracle/graal/issues/708</a></div><div class="footnote" id="_footnotedef_3"><a href="#_footnoteref_3">3</a>. <a target="_blank" rel="noopener" href="https://github.com/oracle/graal/blob/master/substratevm/URL-PROTOCOLS.md#https-support" class="bare">https://github.com/oracle/graal/blob/master/substratevm/URL-PROTOCOLS.md#https-support</a></div></div></div><ul class="tags-list mt-4"><li><a href="/t/groovy/">groovy</a></li><li><a href="/t/graalvm/">graalvm</a></li><li><a href="/t/grape/">grape</a></li><li><a href="/t/native-image/">native-image</a></li></ul></article></div></div></div></div></section><section class="bg-dark posts-layout-01" id="related" data-debug="Scrolled to related posts"><div class="container py-5"><div class="row py-lg-5"><div class="col-12 col-lg-7 d-flex align-items-start mb-lg-0 mb-4"><div class="px-3 px-lg-0 pr-lg-5"><article><a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/"><img class="mb-4 shadow" data-lazy="/images/cards/32.png" width="100%"></a><p class="subtitle m-0"><a href="/groovy-cookbook/">Groovy Cookbook</a></p><h3 class="m-0 serif"><a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/">GraalVM native image inside docker container - does it make sense?</a></h3><div class="post-meta mb-4"><ul><li><time datetime="2019-01-19T12:19:22.000Z">January 19, 2019</time></li><li>12 min. read</li><li><a href="https://e.printstacktrace.blog/graalvm-native-image-inside-docker-container-does-it-make-sense/#disqus_thread">0 Comments</a></li></ul></div><p class="small">We have learned how to create GraalVM native image from standalone Groovy script in the previous blog post. Today we continue the experiments, and this time we are going to create a Docker image to see what are the benefits and drawbacks of this solution.</p></article></div></div><div class="col-12 col-lg-5"><div class="px-3 px-lg-0"><article class="tile"><div class="row mb-4"><div class="col-9"><p class="subtitle m-0"><a href="/groovy-cookbook/">Groovy Cookbook</a></p><h4 class="m-0 serif"><a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/">GraalVM native image inside docker container - does it make sense?</a></h4><div class="post-meta mb-4"><ul><li><time datetime="2019-01-19T12:19:22.000Z">January 19, 2019</time></li><li>12 min. read</li><li><a href="https://e.printstacktrace.blog/graalvm-native-image-inside-docker-container-does-it-make-sense/#disqus_thread">0 Comments</a></li></ul></div><p class="small">We have learned how to create GraalVM native image from standalone Groovy script in the previous...</p></div><div class="col-3"><a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/"><img class="img-fluid rounded shadow-sm mt-3 mb-lg-0" data-lazy="/images/icons/24.png"></a></div></div></article><article class="tile"><div class="row mb-4"><div class="col-9"><p class="subtitle m-0"><a href="/groovy-cookbook/">Groovy Cookbook</a></p><h4 class="m-0 serif"><a href="/graalvm-and-groovy-how-to-start/">GraalVM and Groovy - how to start?</a></h4><div class="post-meta mb-4"><ul><li><time datetime="2018-10-03T21:28:49.000Z">October 3, 2018</time></li><li>12 min. read</li><li><a href="https://e.printstacktrace.blog/graalvm-and-groovy-how-to-start/#disqus_thread">0 Comments</a></li></ul></div><p class="small">GraalVM became one of the most popular topics in the JVM ecosystem. It promises the highest poss...</p></div><div class="col-3"><a href="/graalvm-and-groovy-how-to-start/"><img class="img-fluid rounded shadow-sm mt-3 mb-lg-0" data-lazy="/images/icons/24.png"></a></div></div></article><article class="tile"><div class="row mb-4"><div class="col-9"><p class="subtitle m-0"><a href="/conferences/">Conferences</a></p><h4 class="m-0 serif"><a href="/gr8conf-eu-2019-what-can-you-expect-from-my-talks/">GR8Conf EU 2019 - what can you expect from my talks?</a></h4><div class="post-meta mb-4"><ul><li><time datetime="2019-05-14T06:40:36.000Z">May 14, 2019</time></li><li>12 min. read</li><li><a href="https://e.printstacktrace.blog/gr8conf-eu-2019-what-can-you-expect-from-my-talks/#disqus_thread">0 Comments</a></li></ul></div><p class="small">GR8Conf EU 2019 starts precisely in 13 days (on May 27th). Each year Copenhagen becomes a heart ...</p></div><div class="col-3"><a href="/gr8conf-eu-2019-what-can-you-expect-from-my-talks/"><img class="img-fluid rounded shadow-sm mt-3 mb-lg-0" data-lazy="/images/icons/22.png"></a></div></div></article><a class="gatr" href="https://click.linksynergy.com/fs-bin/click?id=uow2LCEuhvQ&amp;offerid=572706.11&amp;type=3&amp;subid=0" data-type="banner" data-name="nordvpn-03" target="_blank"><img class="img-fluid" data-lazy="/images/yml/nord-vpn-03.png"></a></div></div></div></div></section><section class="sidebar-enabled" id="comments" data-debug="Scrolled to comments"><div class="container"><div class="row"><div class="col-12 col-lg-3 sidebar order-lg-1 order-0"><div class="py-lg-5 py-3 position-sticky text-center" style="top:20px"><div class="d-inline-block d-lg-none"><a class="gatr" href="https://www.jdoqocy.com/click-100191173-10952823" data-type="banner" data-name="grammarly-02" target="_blank"><img class="img-fluid" data-lazy="/images/yml/grammarly-02.png"></a></div><div class="d-none d-lg-inline-block"><a class="gatr" href="https://www.jdoqocy.com/click-100191173-10952823" data-type="banner" data-name="grammarly-01" target="_blank"><img class="img-fluid" data-lazy="/images/yml/grammarly-tower.png"></a></div></div></div><div class="col-12 col-lg-9 order-0 order-lg-0 order-1"><div class="pr-lg-5 py-5"><p class="m-0 serif small text-muted">Any thoughts or ideas?</p><h2 class="mb-4">Let's talk in the comment's section üí¨</h2><div class="disqus-comments"><div class="tip mb-5">Want to put a code sample in the comment? Read the <a target="_blank" rel="noopener" href="https://help.disqus.com/en/articles/1717236-syntax-highlighting"><b>Syntax highlighting</b></a> guide for more information.</div><div class="comments"><div id="disqus_thread"><div id="disqus_empty" style="display:none">Empty</div></div></div></div><script>function load_disqus(e){var t=document.getElementById("disqus_empty");if(document.contains(t)){var d=document.getElementById("disqus_thread"),n=document.createElement("script"),s=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];d&&t&&(t.remove(),n.type="text/javascript",n.async=!0,n.src="//"+e+".disqus.com/embed.js",s.appendChild(n))}}window.addEventListener("scroll",function(e){document.scrollingElement.scrollTop>document.getElementById("disqus_thread").offsetTop-500&&load_disqus("eprintstacktrace")},!1)</script></div></div></div></div></section></main><footer class="bg-dark" id="footer" data-debug="Scrolled to footer"><div class="container py-5"><div class="px-lg-0 px-3"><div class="row py-lg-3"><div class="col-12 col-md-6"><h5 class="mb-4">Latest blog posts</h5><ul class="list-unstyled mb-5"><li><a href="/merging-json-files-recursively-in-the-command-line/">Merging JSON files recursively in the command-line</a></li><li><a href="/jenkins-declarative-pipeline-dynamic-agent/">Jenkins Declarative Pipeline with the dynamic agent - how to configure it?</a></li><li><a href="/groovy-ecosystem-usage-report-2020/">Groovy Ecosystem Usage Report (2020)</a></li><li><a href="/how-to-convert-json-to-csv-from-the-command-line/">How to convert JSON to CSV from the command-line?</a></li><li><a href="/5-common-jenkins-pipeline-mistakes/">5 Common Jenkins Pipeline Mistakes</a></li><li><a href="/how-to-merge-two-maps-in-groovy/">How to merge two maps in Groovy?</a></li><li><a href="/building-stackoverflow-cli-with-java-11-micronaut-picocli-and-graalvm/">Building stackoverflow-cli with Java 11, Micronaut, Picocli, and GraalVM</a></li><li><a href="/how-to-catch-curl-response-in-jenkins-pipeline/">How to catch curl response in Jenkins Pipeline?</a></li><li><a href="/atomic-habits-book-review/">Atomic Habits - book review</a></li><li><a href="/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/">Parsing JSON in command-line with jq: basic filters and functions (part 1)</a></li></ul></div><div class="col-12 col-md-6"><h5 class="mb-4">Trending videos</h5><div class="youtube-row mb-4"><div class="row"><div class="col-12 col-lg-6 text-lg-left text-center mb-lg-0 mb-4"><a class="d-inline-block thumb gatr" target="_blank" rel="noopener" href="https://youtu.be/uIKvYgix-L4" data-type="youtube" data-name="How to merge two JSON files in the command-line using jq? | #jq #json #curl" data-time="9:00"><img class="img-fluid shadow" data-lazy="https://i3.ytimg.com/vi/uIKvYgix-L4/mqdefault.jpg"></a></div><div class="col-12 col-lg-6"><h6 class="m-0 p-0 mb-3 sans-serif text-lg-left text-center px-lg-0 px-4"><a class="gatr" target="_blank" rel="noopener" href="https://youtu.be/uIKvYgix-L4" data-type="youtube" data-name="How to merge two JSON files in the command-line using jq? | #jq #json #curl">How to merge two JSON files in the command-line using jq? | #jq #json #curl</a></h6><p class="sans-serif small text-justify">In this jq tutorial video, I show you how you can merge two JSON files in the command-line using jq JSON processor. I explain...</p></div></div></div><div class="youtube-row mb-4"><div class="row"><div class="col-12 col-lg-6 text-lg-left text-center mb-lg-0 mb-4"><a class="d-inline-block thumb gatr" target="_blank" rel="noopener" href="https://youtu.be/Xdcg4Drg1hc" data-type="youtube" data-name="Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut" data-time="36:53"><img class="img-fluid shadow" data-lazy="https://i3.ytimg.com/vi/Xdcg4Drg1hc/mqdefault.jpg"></a></div><div class="col-12 col-lg-6"><h6 class="m-0 p-0 mb-3 sans-serif text-lg-left text-center px-lg-0 px-4"><a class="gatr" target="_blank" rel="noopener" href="https://youtu.be/Xdcg4Drg1hc" data-type="youtube" data-name="Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut">Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut</a></h6><p class="sans-serif small text-justify">In this video, I will show you how to create a standalone command-line application (CLI app) using Java 11, Micronaut, Picocl...</p></div></div></div></div></div><div class="row text-lg-left text-center"><div class="col-12 col-md-3 mb-lg-0 mb-4"><h5 class="mb-4">Useful links</h5><ul class="list-unstyled"><li><a class="gatr" href="/" data-type="footer-useful-links" data-name="Start here">Start here</a></li><li><a class="gatr" href="/about" data-type="footer-useful-links" data-name="About">About</a></li><li><a class="gatr" href="/archives" data-type="footer-useful-links" data-name="Archives">Archives</a></li><li><a class="gatr" href="/resources" data-type="footer-useful-links" data-name="Resources">Resources</a></li><li><a class="gatr" href="/privacy-policy" data-type="footer-useful-links" data-name="Privacy Policy">Privacy Policy</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://teespring.com/stores/eprintstacktrace" data-type="footer-useful-links" data-name="Merchandise">Merchandise</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://kit.co/wololock" data-type="footer-useful-links" data-name="My Kit">My Kit</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://feeds.feedburner.com/Eprintstacktracenet" data-type="footer-useful-links" data-name="RSS">RSS</a></li><li><a class="gatr" href="/support-me" data-type="footer-useful-links" data-name="Support me">Support the blog <em class="fas fa-heart color-red ml-2"></em></a></li></ul></div><div class="col-12 col-md-3 mb-lg-0 mb-4"><h5 class="mb-4">Popular categories</h5><ul class="list-unstyled"><li><a class="gatr" href="/groovy-cookbook/" data-type="footer-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2 text-muted">28</span></a></li><li><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="footer-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2 text-muted">9</span></a></li><li><a class="gatr" href="/programmers-bookshelf/" data-type="footer-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2 text-muted">6</span></a></li><li><a class="gatr" href="/micronaut-cookbook/" data-type="footer-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2 text-muted">4</span></a></li><li><a class="gatr" href="/ratpack-cookbook/" data-type="footer-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2 text-muted">4</span></a></li><li><a class="gatr" href="/learning-java/" data-type="footer-category" data-name="Learning Java">Learning Java<span class="count ml-2 text-muted">4</span></a></li><li><a class="gatr" href="/jq-cookbook/" data-type="footer-category" data-name="jq cookbook">jq cookbook<span class="count ml-2 text-muted">3</span></a></li><li><a class="gatr" href="/how-to/" data-type="footer-category" data-name="How to">How to<span class="count ml-2 text-muted">3</span></a></li><li><a class="gatr" href="/blog-reports/" data-type="footer-category" data-name="Blog Reports">Blog Reports<span class="count ml-2 text-muted">2</span></a></li></ul></div><div class="col-12 col-md-6"><h5 class="mb-4">Popular tags</h5><section class="tagcloud"><a href="/t/affiliate/" style="font-size:1.8em;color:#7b828b">affiliate</a> <a href="/t/async/" style="font-size:1.4em;color:#696f76">async</a> <a href="/t/benchmark/" style="font-size:1.6em;color:#727880">benchmark</a> <a href="/t/blogging/" style="font-size:1.2em;color:#60666b">blogging</a> <a href="/t/book/" style="font-size:2em;color:#848b95">book</a> <a href="/t/career/" style="font-size:1.2em;color:#60666b">career</a> <a href="/t/cicd/" style="font-size:2.4em;color:#969daa">cicd</a> <a href="/t/continuous-integration/" style="font-size:1.4em;color:#696f76">continuous-integration</a> <a href="/t/curl/" style="font-size:1.6em;color:#727880">curl</a> <a href="/t/devops/" style="font-size:2.2em;color:#8d94a0">devops</a> <a href="/t/docker/" style="font-size:1.6em;color:#727880">docker</a> <a href="/t/git/" style="font-size:1.2em;color:#60666b">git</a> <a href="/t/github/" style="font-size:1.4em;color:#696f76">github</a> <a href="/t/graalvm/" style="font-size:2.4em;color:#969daa">graalvm</a> <a href="/t/gradle/" style="font-size:1.2em;color:#60666b">gradle</a> <a href="/t/grails/" style="font-size:1.4em;color:#696f76">grails</a> <a href="/t/groovy/" style="font-size:3em;color:#b1b9ca">groovy</a> <a href="/t/haskell/" style="font-size:1.4em;color:#696f76">haskell</a> <a href="/t/hexo/" style="font-size:1.2em;color:#60666b">hexo</a> <a href="/t/java/" style="font-size:2.8em;color:#a8b0bf">java</a> <a href="/t/java-8/" style="font-size:1.4em;color:#696f76">java-8</a> <a href="/t/jenkins/" style="font-size:2.6em;color:#9fa7b5">jenkins</a> <a href="/t/jenkins-pipeline/" style="font-size:2.6em;color:#9fa7b5">jenkins-pipeline</a> <a href="/t/jenkinsfile/" style="font-size:1.4em;color:#696f76">jenkinsfile</a> <a href="/t/jmh/" style="font-size:1.8em;color:#7b828b">jmh</a> <a href="/t/jq/" style="font-size:1.6em;color:#727880">jq</a> <a href="/t/json/" style="font-size:1.6em;color:#727880">json</a> <a href="/t/junit/" style="font-size:1.4em;color:#696f76">junit</a> <a href="/t/learning/" style="font-size:1.6em;color:#727880">learning</a> <a href="/t/maven/" style="font-size:1.4em;color:#696f76">maven</a> <a href="/t/metaprogramming/" style="font-size:1.2em;color:#60666b">metaprogramming</a> <a href="/t/micronaut/" style="font-size:2em;color:#848b95">micronaut</a> <a href="/t/native-image/" style="font-size:1.8em;color:#7b828b">native-image</a> <a href="/t/non-blocking/" style="font-size:1.6em;color:#727880">non-blocking</a> <a href="/t/progress/" style="font-size:1.2em;color:#60666b">progress</a> <a href="/t/ratpack/" style="font-size:2.4em;color:#969daa">ratpack</a> <a href="/t/reactive-programming/" style="font-size:1.4em;color:#696f76">reactive-programming</a> <a href="/t/reading/" style="font-size:1.4em;color:#696f76">reading</a> <a href="/t/recursion/" style="font-size:1.4em;color:#696f76">recursion</a> <a href="/t/review/" style="font-size:2em;color:#848b95">review</a> <a href="/t/rxjava/" style="font-size:1.4em;color:#696f76">rxjava</a> <a href="/t/sdkman/" style="font-size:1.6em;color:#727880">sdkman</a> <a href="/t/session/" style="font-size:1.2em;color:#60666b">session</a> <a href="/t/split/" style="font-size:1.2em;color:#60666b">split</a> <a href="/t/spock/" style="font-size:1.6em;color:#727880">spock</a> <a href="/t/stackoverflow/" style="font-size:1.4em;color:#696f76">stackoverflow</a> <a href="/t/string/" style="font-size:1.4em;color:#696f76">string</a> <a href="/t/tail-call/" style="font-size:1.2em;color:#60666b">tail-call</a> <a href="/t/tail-recursion/" style="font-size:1.2em;color:#60666b">tail-recursion</a> <a href="/t/unit-test/" style="font-size:1.6em;color:#727880">unit-test</a></section></div></div></div></div><section class="bottom"><div class="container"><ul class="text-center py-1 m-0"><li class="d-inline-block">Designed by <a class="gatr" target="_blank" rel="noopener" href="https://twitter.com/wololock" data-type="footer" data-name="designed">@wololock</a></li><li class="d-inline-block">Created with <a class="gatr" target="_blank" rel="noopener" href="https://hexo.io" data-type="footer" data-name="hexo">Hexo</a></li><li class="d-inline-block">Hosted on <a class="gatr" target="_blank" rel="noopener" href="https://github.com/wololock/wololock.github.io" data-type="footer" data-name="github">GitHub</a></li><li class="d-inline-block">Deployed with <a class="gatr" target="_blank" rel="noopener" href="https://circleci.com/gh/wololock/wololock.github.io" data-type="footer" data-name="circleci">Circle CI</a></li><li class="d-inline-block">License <a class="gatr" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-type="footer" data-name="license">CC BY-NC-SA 4.0</a></li><li class="d-inline-block"><a class="gatr" target="_blank" rel="noopener" href="https://github.com/wololock/wololock.github.io/commits/develop" data-type="footer" data-name="last-commit"><img data-lazy="https://badgen.net/github/last-commit/wololock/wololock.github.io?color=blue&amp;scale=0.8"></a></li></ul></div></section></footer><script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/48c5da59c9.js" crossorigin="anonymous" async></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#5fc4ff" data-font-family="Lora,serif" data-font-size="16px" data-bg="#1d2b36"></script><script src="/js/main.js?v=11"></script><script src="/js/highlightjs/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(e,t,a,c,n,i,r){e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=t.createElement(a),r=t.getElementsByTagName(a)[0],i.async=1,i.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(i,r)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery(document).on("mousedown","a.gatr",function(e){var t=jQuery(this),a=t.attr("data-type"),c=t.attr("data-name"),n=1===e.which?"click":2===e.which?"middle-click":"right-click";return ga("send","event",a,n,c),!0}),jQuery(document).on("mousedown","#related a",function(e){var t=jQuery(this),a=1===e.which?"click":2===e.which?"middle-click":"right-click";return ga("send","event","related",a,t.attr("href")),!0}),jQuery(document).on("mousedown","#footer a",function(e){var t=jQuery(this),a=1===e.which?"click":2===e.which?"middle-click":"right-click";return ga("send","event","footer",a,t.attr("href")),!0})</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>