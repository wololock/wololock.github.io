<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="author" content="Szymon Stepniak"><meta name="robots" content="index, follow"><meta name="keywords" content="groovy,graalvm,grape,native-image"><title>GraalVM with Groovy and Grape - creating native image of a standalone script</title><meta name="description" content="The Apache Groovy programming language has extraordinary scripting capabilities. When you combine it with the Grape dependency management system, it turns out that the sky is the limit. In one of the"><meta property="og:type" content="article"><meta property="og:title" content="GraalVM with Groovy and Grape - creating native image of a standalone script"><meta property="og:url" content="https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/"><meta property="og:site_name" content="Szymon Stepniak - I want to help you to become a better software developer"><meta property="og:description" content="The Apache Groovy programming language has extraordinary scripting capabilities. When you combine it with the Grape dependency management system, it turns out that the sky is the limit. In one of the"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2019-01-16T14:14:42.000Z"><meta property="article:modified_time" content="2019-01-19T09:34:02.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="groovy"><meta property="article:tag" content="graalvm"><meta property="article:tag" content="grape"><meta property="article:tag" content="native-image"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wololock"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="canonical" href="https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,700;1,400;1,700&amp;family=Lora:ital,wght@0,400;0,700;1,400;1,700&amp;family=Montserrat:wght@300;400;700&amp;family=DM+Mono:wght@400;500&amp;family=Poppins:wght@500;700;800&amp;family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous"><link rel="stylesheet" href="/css/main.css?v=76"><link rel="stylesheet" href="/css/highlight.css?v=76"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://e.printstacktrace.blog/#/schema/person/wololock","name":"Szymon Stepniak","description":"I want to help you to become a better software developer.","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/#avatar","inLanguage":"en-US","url":"https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200","caption":"Szymon Stepniak"},"logo":{"@id":"https://e.printstacktrace.blog/#avatar"},"sameAs":["https://twitter.com/wololock","https://github.com/wololock","https://stackoverflow.com/users/2194470/szymon-stepniak","https://www.youtube.com/c/eprintstacktrace"]},{"@type":"WebSite","@id":"https://e.printstacktrace.blog/#website","url":"https://e.printstacktrace.blog","name":"Szymon Stepniak - I want to help you to become a better software developer","description":"Blog about programming, created by Upwork's Top Rated freelancer, 10+ years experienced Java/Groovy developer. Contact me if you are looking for an experienced and high quality consultant."},{"@type":"WebPage","@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#webpage","url":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/","name":"GraalVM with Groovy and Grape - creating native image of a standalone script","isPartOf":{"@id":"https://e.printstacktrace.blog/#website"},"datePublished":"2019-01-16T14:14:42.000Z","dateModified":"2019-01-19T09:34:02.000Z","description":"\nThe Apache Groovy programming language has extraordinary scripting capabilities.\nWhen you combine it with the Grape dependency management system, it turns out that the sky is the limit.\nIn one of the previous blog posts, I explained how you can start compiling Groovy code to the native binary files, using GraalVM&#8217;s native-image compiler.\nThis time I tried to do the same with the Groovy script that uses Grape to provide an external library to the classpath.\nI thought it won&#8217;t be possible, but luckily - I was wrong. \n","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/"]}]},{"@type":"Article","@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#article","isPartOf":{"@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#webpage"},"author":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"headline":"GraalVM with Groovy and Grape - creating native image of a standalone script","datePublished":"2019-01-16T14:14:42.000Z","dateModified":"2019-01-19T09:34:02.000Z","mainEntityOfPage":{"@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#webpage"},"publisher":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"keywords":"groovy,graalvm,grape,native-image","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#primaryimage","url":"https://e.printstacktrace.blog/images/cards/29.png","inLanguage":"en-US","caption":"GraalVM with Groovy and Grape - creating native image of a standalone script"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://e.printstacktrace.blog"},{"@type":"ListItem","position":2,"name":"Groovy Cookbook","item":"https://e.printstacktrace.blog/groovy-cookbook/"},{"@type":"ListItem","position":3,"name":"GraalVM with Groovy and Grape - creating native image of a standalone script"}]}]}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Szymon Stepniak - I want to help you to become a better software developer" type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body><header class="fixed-top" id="header"><div class="container"><nav class="navbar navbar-expand-lg px-0 py-lg-0 navbar-dark"><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarLinks" aria-controls="navbarLinks"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarLinks"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link gatr" href="/" data-type="nav" data-name="Home">Home</a></li><li class="nav-item"><a class="nav-link gatr" href="/about/" data-type="nav" data-name="About Me">About Me</a></li><li class="nav-item"><a class="nav-link gatr" href="/youtube/" target="_blank" data-type="nav" data-name="Videos">Videos</a></li><li class="nav-item"><a class="nav-link gatr" href="/archives/" data-type="nav" data-name="Archives">Archives</a></li><li class="nav-item"><a class="nav-link gatr" href="/resources/" data-type="nav" data-name="Resources">Resources</a></li><li class="nav-item"><a class="nav-link gatr" href="/upwork/" target="_blank" data-type="nav" data-name="Hire me">Hire me</a></li></ul></div></nav></div></header><div id="pageprogress"><div class="bar"></div></div><main id="main"><article class="post"><div class="jumbotron pt-lg-5 pb-1"><div class="container pt-lg-5"><div class="row py-5"><div class="order-0 col-lg-12"><div class="pr-lg-5"><p class="subtitle m-0 p-0"><a class="category" href="/groovy-cookbook/">Groovy Cookbook</a></p><h1 class="mt-0 mb-2">GraalVM with Groovy and Grape - creating native image of a standalone script</h1><div class="lead my-4"><div class="paragraph"><p>The <a target="_blank" rel="noopener" href="http://groovy-lang.org/">Apache Groovy</a> programming language has extraordinary scripting capabilities. When you combine it with the <a target="_blank" rel="noopener" href="http://docs.groovy-lang.org/latest/html/documentation/grape.html">Grape dependency management system</a>, it turns out that the sky is the limit. In one of the <a href="/graalvm-and-groovy-how-to-start/" title="previous blog posts">previous blog posts</a>, I explained how you can start compiling Groovy code to the native binary files, using GraalVM&#8217;s <code>native-image</code> compiler. This time I tried to do the same with the Groovy script that uses Grape to provide an external library to the classpath. I thought it won&#8217;t be possible, but luckily - I was wrong. <span class="icon"><i class="fa fa-smile-o"></i></span></p></div></div><ul class="post-meta-extended"><li class="d-none d-lg-inline-block"><a href="/about"><img class="rounded-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="52" width="52" style="margin-top:-24px"></a></li><li><div class="small">Author</div><div class="font-weight-bold"><a href="/about">Szymon Stepniak</a></div></li><li><div class="small">Published</div><div class="font-weight-bold"><time datetime="2019-01-16T14:14:42.000Z">Jan 16, 2019</time></div></li><li><div class="small">Reading time</div><div class="font-weight-bold">12 minutes</div></li><li><div class="small">Discussion</div><div class="font-weight-bold"><a href="https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/#disqus_thread">0 Comments</a></div></li></ul></div></div></div></div></div><div class="container py-5"><a id="more"></a><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">The source code of the examples explained below can be found here <a target="_blank" rel="noopener" href="https://github.com/wololock/graalvm-groovy-examples/tree/master/grape-script-example">wololock/graalvm-groovy-examples</a></td></tr></table></div><div class="sect1"><h2 id="prerequisites">Prerequisites</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s start with defining runtime environment.</p></div><div class="ulist"><ul><li><p><strong>GraalVM</strong> <code>19.2.1</code></p></li><li><p><strong>Groovy</strong> <code>2.5.8</code></p></li></ul></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">I use a great command line tool called <a target="_blank" rel="noopener" href="https://sdkman.io/">SDKMAN!</a> to install both, GraalVM JDK and Groovy library. It allows me to install GraalVM with the following command: <code>sdk install java 19.2.1-grl</code> and then I can switch to this Java version for current shell session with <code>sdk use java 19.2.1-grl</code>.</td></tr></table></div></div></div><div class="sect1"><h2 id="the-code">The code</h2><div class="sectionbody"><div class="paragraph"><p>In this article, I will use a reasonably simple Groovy script. It expects a single command line argument â€” a website URL, and it displays to the console the information about how many links given website contains. Nothing fancy, but you probably see how we could extend this example to do something more useful.</p></div><div class="listingblock"><div class="title">Listing 1. src/CountLinks.groovy</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">#!groovy
import org.jsoup.Jsoup
import org.jsoup.nodes.Document

@Grab(group='org.jsoup', module='jsoup', version='1.11.3')

final String url = args[0]

final Document doc = Jsoup.connect(url).get()
final int links = doc.select("a").size()
println "Website $&#123;url&#125; contains $&#123;links&#125; links."</code></pre></div></div><div class="paragraph"><p>We can run it and see how much time it took to produce the output.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ time groovy CountLinks.groovy https://e.printstacktrace.blog
Website https://e.printstacktrace.blog contains 95 links.
groovy CountLinks.groovy https://e.printstacktrace.blog  6,29s user 0,26s system 390% cpu 1,677 total</code></pre></div></div><div class="paragraph"><p>It took around <strong>1.7 seconds</strong> to produce the result. Quite long, especially for a script that does not do much of a work. We can assume that network communication consumed around 200 milliseconds, according to <code>curl</code> results.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ time curl -o /tmp/output "https://e.printstacktrace.blog"
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 23256    0 23256    0     0  23256      0 --:--:-- --:--:-- --:--:--  118k
curl -o /tmp/output "https://e.printstacktrace.blog"  0,02s user 0,01s system 10% cpu 0,206 total</code></pre></div></div><div class="paragraph"><p>It looks like that starting JVM and running Grape dependency manager takes around 1.5 seconds in this case. Let&#8217;s try to improve the performance by executing our script as a Java compiled class.</p></div></div></div><div class="sect1"><h2 id="compiling-script-to-the-java-bytecode">Compiling script to the Java bytecode</h2><div class="sectionbody"><div class="paragraph"><p>We need to explain one important thing. Grape dependency manager has some limitations<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, and it does not work without Groovy class loader. There is a configuration annotation called <code>@GrabConfig(systemClassLoader = true)</code>, but it does not have any effect when we compile the script to a Java bytecode class file. A script containing this annotation generates the same bytecode as the one that misses it. If this annotation had any effect when running compiled bytecode as a Java program, then we could use <code>-Djava.system.class.loader</code> to specify the Groovy class loader.</p></div><div class="paragraph"><p>Here is the full Java command (with configured classpath) and the error Grape library throws because of the invalid class loader:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -Djava.system.class.loader=groovy.lang.GroovyClassLoader -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8/groovy-2.5.8.jar:$HOME/.m2/repository/org/apache/ivy/ivy/2.4.0/ivy-2.4.0.jar" CountLinks https://e.printstacktrace.blog

Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: java.lang.RuntimeException: No suitable ClassLoader found for grab
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	...
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.invoke(StaticMetaMethodSite.java:46)
	at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.callStatic(StaticMetaMethodSite.java:102)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:55)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:197)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:217)
	at CountLinks.&lt;clinit&gt;(CountLinks.groovy)</code></pre></div></div><div class="paragraph"><p>However, there is a workaround we can apply. We can turn off Grape&#8217;s dependency manager with <code>-Dgroovy.grape.enabled=false</code> option, and we can add Jsoup library JAR file to the classpath manually instead. Let&#8217;s give it a shot and see what happens.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -Dgroovy.grape.enable=false -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8groovy-2.5.8.jar:$HOME/.groovy/grapes/org.jsoup/jsoup/jars/jsoup-1.11.3.jar" CountLinks https://e.printstacktrace.blog

Website https://e.printstacktrace.blog contains 95 links.</code></pre></div></div><div class="paragraph"><p>In this case, we only added <code>groovy-all-2.5.8.jar</code> and <code>jsoup-1.11.3.jar</code> to execute the script successfully. Measuring execution time of the compiled Java program without Grape dependency manager shown that it takes around <strong>1 second</strong> in average to produce the same output as it was before. We still suffer from JVM boot time, but we can improve in this area as well. It&#8217;s time to create GraalVM native image.</p></div></div></div><div class="sect1"><h2 id="creating-graalvm-native-image">Creating GraalVM native image</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s use the existing <code>CountLinks.class</code> file to create a GraalVM native image from it. We need two JSON files containing reflection configuration for GraalVM. The first one <a target="_blank" rel="noopener" href="https://gist.github.com/wololock/e99d748e724bf5ae6ce930c1b8cb9a90">can be found here</a>, and it contains a configuration of all dynamically generated runtime methods for Groovy 2.5.8. The second one contains only Groovy script class we created.</p></div><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content">You can also generate <code>dgm.json</code> file on your own <a target="_blank" rel="noopener" href="https://gist.github.com/wololock/ac83a8196a8252fbbaacf4ac84e10b36">using the following Groovy script</a>.</td></tr></table></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">I would recommend using <code>native-image-agent</code> as explained in the previous blog post. It makes generating reflections JSON as easy as running a simple Java application.</td></tr></table></div><div class="listingblock"><div class="title">Listing 2. src/countlinks.json</div><div class="content"><pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">[
  &#123;
    "name": "CountLinks",
    "allDeclaredConstructors": true,
    "allPublicConstructors": true,
    "allDeclaredMethods": true,
    "allPublicMethods": true
  &#125;
]</code></pre></div></div><div class="listingblock"><div class="title">Listing 3. Creating native image</div><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ native-image -Dgroovy.grape.enable=false \
    --no-server \
    --allow-incomplete-classpath \
    --no-fallback \
    --report-unsupported-elements-at-runtime \
    --initialize-at-build-time \
    --initialize-at-run-time=org.codehaus.groovy.control.XStreamUtils,groovy.grape.GrapeIvy \
    -H:ConfigurationFileDirectories=out/conf/ \
    --enable-url-protocols=http,https \
    -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8/groovy-2.5.8.jar:$HOME/.groovy/grapes/org.jsoup/jsoup/jars/jsoup-1.11.3.jar" \
    CountLinks

[countlinks:305]    classlist:   2,110.17 ms
[countlinks:305]        (cap):     998.28 ms
[countlinks:305]        setup:   2,746.31 ms
[countlinks:305]   (typeflow):  47,883.31 ms
[countlinks:305]    (objects): 107,634.87 ms
[countlinks:305]   (features):   1,475.31 ms
[countlinks:305]     analysis: 158,631.80 ms
[countlinks:305]     universe:   1,639.31 ms
[countlinks:305]      (parse):   5,070.39 ms
[countlinks:305]     (inline):   4,234.00 ms
[countlinks:305]    (compile):  34,543.96 ms
[countlinks:305]      compile:  46,402.57 ms
[countlinks:305]        image:  10,556.78 ms
[countlinks:305]        write:   1,365.01 ms
[countlinks:305]      [total]: 223,632.13 ms</code></pre></div></div><div class="paragraph"><p>The native image generation succeeds. Let&#8217;s run it.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./countlinks https://e.printstacktrace.blog

Exception in thread "main" groovy.lang.MissingMethodException: No signature of method: static org.codehaus.groovy.runtime.InvokerHelper.runScript() is applicable for argument types: (Class, [Ljava.lang.String;) values: [class CountLinks, [https://e.printstacktrace.blog]]
	at groovy.lang.MetaClassImpl.invokeStaticMissingMethod(MetaClassImpl.java:1528)
	at groovy.lang.MetaClassImpl.invokeStaticMethod(MetaClassImpl.java:1514)
	at org.codehaus.groovy.runtime.callsite.StaticMetaClassSite.call(StaticMetaClassSite.java:52)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:136)
	at CountLinks.main(CountLinks.groovy)</code></pre></div></div><div class="paragraph"><p>No luck. GraalVM throws this exception because at the current stage of the development<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> it is not possible to invoke any Groovy script class that is not statically compiled. Let&#8217;s fix it. We use compiler configuration script file named <code>compiler.groovy</code>. It adds static compilation and type checking.</p></div><div class="listingblock"><div class="title">Listing 4. src/compiler.groovy</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">withConfig(configuration) &#123;
    ast(groovy.transform.CompileStatic)
    ast(groovy.transform.TypeChecked)
&#125;</code></pre></div></div><div class="paragraph"><p>Let&#8217;s recompile the code using compiler configuration script.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ groovyc --configscript=compiler.groovy CountLinks.groovy

org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
CountLinks.groovy: 7: [Static type checking] - The variable [args] is undeclared.
 @ line 7, column 20.
   final String url = args[0]
                      ^

1 error</code></pre></div></div><div class="paragraph"><p>Bad luck. The error thrown by the static type checking says that there is no args variable available. We need to modify our initial script to make args variable available.</p></div><div class="listingblock"><div class="title">Listing 5. src/CountLinks.groovy</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">#!groovy
import org.jsoup.Jsoup
import org.jsoup.nodes.Document

@Grab(group='org.jsoup', module='jsoup', version='1.11.3')

final String[] args = getProperty("args") as String[]
final String url = args[0]

final Document doc = Jsoup.connect(url).get()
final int links = doc.select("a").size()
println "Website $&#123;url&#125; contains $&#123;links&#125; links."</code></pre></div></div><div class="paragraph"><p>Before we create a native image, let&#8217;s run this statically compiled Groovy script as a Java program to see if it makes any difference comparing to the previous example. It is not a bulletproof benchmark, but it looks like the new bytecode executes in around 830 milliseconds.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ time java -Dgroovy.grape.enable=false -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8/groovy-2.5.8.jar:$HOME/.groovy/grapes/org.jsoup/jsoup/jars/jsoup-1.11.3.jar" CountLinks https://e.printstacktrace.blog
Website https://e.printstacktrace.blog contains 95 links.
java -Dgroovy.grape.enable=false -cp  CountLinks   2,59s user 0,13s system 330% cpu 0,823 total</code></pre></div></div><div class="paragraph"><p>Let&#8217;s recreate the native image.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ native-image -Dgroovy.grape.enable=false \
    --no-server \
    --allow-incomplete-classpath \
    --no-fallback \
    --report-unsupported-elements-at-runtime \
    --initialize-at-build-time \
    --initialize-at-run-time=org.codehaus.groovy.control.XStreamUtils,groovy.grape.GrapeIvy \
    -H:ConfigurationFileDirectories=out/conf/ \
    --enable-url-protocols=http,https \
    -cp ".:$HOME/.m2/repository/org/codehaus/groovy/groovy/2.5.8/groovy-2.5.8.jar:$HOME/.groovy/grapes/org.jsoup/jsoup/jars/jsoup-1.11.3.jar" \
    CountLinks

[countlinks:17259]    classlist:   1,989.96 ms
[countlinks:17259]        (cap):     989.83 ms
[countlinks:17259]        setup:   2,380.31 ms
[countlinks:17259]   (typeflow):  42,717.13 ms
[countlinks:17259]    (objects): 105,959.35 ms
[countlinks:17259]   (features):   1,133.75 ms
[countlinks:17259]     analysis: 151,461.35 ms
[countlinks:17259]     universe:   1,489.67 ms
[countlinks:17259]      (parse):   4,564.73 ms
[countlinks:17259]     (inline):   4,501.88 ms
[countlinks:17259]    (compile):  33,623.14 ms
[countlinks:17259]      compile:  45,452.90 ms
[countlinks:17259]        image:   9,294.79 ms
[countlinks:17259]        write:     743.83 ms
[countlinks:17259]      [total]: 212,978.90 ms</code></pre></div></div><div class="paragraph"><p>And let&#8217;s run it.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ time ./countlinks https://e.printstacktrace.blog

WARNING: The sunec native library, required by the SunEC provider, could not be loaded. This library is usually shipped as part of the JDK and can be found under &lt;JAVA_HOME&gt;/jre/lib/&lt;platform&gt;/libsunec.so. It is loaded at run time via System.loadLibrary("sunec"), the first time services from SunEC are accessed. To use this provider's services the java.library.path system property needs to be set accordingly to point to a location that contains libsunec.so. Note that if java.library.path is not set it defaults to the current working directory.
Exception in thread "main" org.codehaus.groovy.runtime.InvokerInvocationException: java.lang.UnsatisfiedLinkError: sun.security.ec.ECDSASignature.verifySignedDigest([B[B[B[B)Z [symbol: Java_sun_security_ec_ECDSASignature_verifySignedDigest or Java_sun_security_ec_ECDSASignature_verifySignedDigest___3B_3B_3B_3B]
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:111)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:326)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1235)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1041)
	at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:1018)
	at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:1001)
	at org.codehaus.groovy.runtime.InvokerHelper.runScript(InvokerHelper.java:423)
	at CountLinks.main(CountLinks.groovy)
Caused by: java.lang.UnsatisfiedLinkError: sun.security.ec.ECDSASignature.verifySignedDigest([B[B[B[B)Z [symbol: Java_sun_security_ec_ECDSASignature_verifySignedDigest or Java_sun_security_ec_ECDSASignature_verifySignedDigest___3B_3B_3B_3B]
	at com.oracle.svm.jni.access.JNINativeLinkage.getOrFindEntryPoint(JNINativeLinkage.java:145)
	at com.oracle.svm.jni.JNIGeneratedMethodSupport.nativeCallAddress(JNIGeneratedMethodSupport.java:54)</code></pre></div></div><div class="paragraph"><p>Another error. We already used to it, right? :) This time the error we see is entirely expected. GraalVM does not support HTTPS protocol by default<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup>, that is why we had to add <code>--enable-url-protocols=https</code>. However, the image we have built does not include required native library. It tries to load it, but it uses the current working directory, and it fails. The solution is simple - we need to add <code>-Djava.library.path</code> in the command line, and we are good to go.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ time ./countlinks -Djava.library.path=$JAVA_HOME/jre/lib/amd64 https://e.printstacktrace.blog
Website https://e.printstacktrace.blog contains 95 links.
./countlinks -Djava.library.path=$JAVA_HOME/jre/lib/amd64   0,02s user 0,01s system 18% cpu 0,196 total</code></pre></div></div><div class="paragraph"><p>Finally! <strong>It worked!</strong> Running the program several times shows that the average execution time is around <strong>200 ms</strong> (the best time recorded: <strong>151 ms</strong>). Our program is still affected by network latency, but this is something we cannot do anything with. However, we reduced the total execution time from <strong>1.7 s</strong> to <strong>0.2 s</strong>, using almost the same script (we only have to apply the changes required by static compilation).</p></div><script id="asciicast-Q4kI1S3hKDfTvGBOdgkAIAv0q" src="https://asciinema.org/a/Q4kI1S3hKDfTvGBOdgkAIAv0q.js" async></script></div></div><div class="sect1"><h2 id="conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>Groovy and Grape dependency management is a powerful pair of tools. And even if we can&#8217;t use Grape directly in the Java program, or we can&#8217;t invoke dynamic Groovy script in the GraalVM, we can still use almost the same bytecode and generate a standalone native image to remove the cost of the JVM boot and Grape dependency check.</p></div><div class="paragraph"><p>Of course, these benefits don&#8217;t come without a cost. The size of the generated native image is 50 MB, while the total size of the Groovy script, and the two JAR dependencies it uses is around 5,6 MB. Also, the Groovy script you may want to compile to the native image might require some reworking to make it compatible with static compilation. So for some of the scripts, this might be not possible to do.</p></div><div class="paragraph"><p>I hope you&#8217;ve enjoyed reading this article, and you&#8217;ve learned something useful from it. Please share your thoughts in the comments section below. I would love to hear your opinion.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">Continue reading - <a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/" title="GraalVM native image inside docker container - does it make sense?">GraalVM native image inside docker container - does it make sense?</a></td></tr></table></div></div></div><div id="footnotes"><hr><div class="footnote" id="_footnotedef_1"><a href="#_footnoteref_1">1</a>. <a target="_blank" rel="noopener" href="https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md" class="bare">https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md</a></div><div class="footnote" id="_footnotedef_2"><a href="#_footnoteref_2">2</a>. <a target="_blank" rel="noopener" href="https://github.com/oracle/graal/issues/708" class="bare">https://github.com/oracle/graal/issues/708</a></div><div class="footnote" id="_footnotedef_3"><a href="#_footnoteref_3">3</a>. <a target="_blank" rel="noopener" href="https://github.com/oracle/graal/blob/master/substratevm/URL-PROTOCOLS.md#https-support" class="bare">https://github.com/oracle/graal/blob/master/substratevm/URL-PROTOCOLS.md#https-support</a></div></div></div></article><section id="share"><div class="container pb-5"><div class="row justify-content-between align-items-center"><div class="col-lg"><p class="font-size-5 text-uppercase mb-0">Did you like this article?</p><h3 class="mb-lg-0 mt-0">Consider buying me a coffee</h3></div><div class="col-auto buttons"><div class="pt-lg-4"><a class="align-middle mr-2 gatr" href="/buy-me-a-coffee/" target="_blank"><img data-lazy="/images/buy-me-a-coffee.png" height="32"></a><iframe class="align-middle gatr" src="https://github.com/sponsors/wololock/button" title="Sponsor wololock" height="35" width="116" style="border:0"></iframe></div></div></div></div></section><section id="related" data-debug="Scrolled to related posts"><div class="featured-post py-5"><div class="container py-3"><div class="row"><div class="col-12"><div class="row"><div class="col-lg-8 order-0"><div class="pr-5"><p class="subtitle m-0 p-0"><a class="category" href="/groovy-cookbook/">Groovy Cookbook</a></p><h3 class="mt-0 mb-2">Continue reading: <a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/">"GraalVM native image inside docker container - does it make sense?"</a></h3><div class="my-4"><div class="paragraph"><p>We have learned how to create <a target="_blank" rel="noopener" href="https://www.graalvm.org/">GraalVM</a> native image from standalone Groovy script <a href="/graalvm-groovy-grape-creating-native-image-of-standalone-script/" title="in the previous blog post">in the previous blog post</a>. Today we continue the experiments, and this time we are going to create a <a target="_blank" rel="noopener" href="https://www.docker.com/why-docker">Docker</a> image to see what are the benefits and drawbacks of this solution.</p></div><a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/">Read more<i class="fas fa-arrow-right ml-2"></i></a></div><ul class="post-meta-extended"><li class="d-none d-lg-inline-block"><a href="/about"><img class="rounded-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="52" width="52" style="margin-top:-24px"></a></li><li><div class="small">Author</div><div class="font-weight-bold"><a href="/about">Szymon Stepniak</a></div></li><li><div class="small">Published</div><div class="font-weight-bold"><time datetime="2019-01-19T12:19:22.000Z">Jan 19, 2019</time></div></li><li><div class="small">Reading time</div><div class="font-weight-bold">6 minutes</div></li><li><div class="small">Discussion</div><div class="font-weight-bold"><a href="https://e.printstacktrace.blog/graalvm-native-image-inside-docker-container-does-it-make-sense/#disqus_thread">0 Comments</a></div></li></ul></div></div><div class="col-lg-4 order-1 d-none d-lg-block"><a href="/graalvm-native-image-inside-docker-container-does-it-make-sense/"><img class="img-fluid rounded" data-lazy="/images/cards/32.png" style="margin-bottom:-300px"></a></div></div></div></div></div></div><div class="remaining"><div class="container py-5"><div class="row"><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="21 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/29.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">GraalVM and Groovy - how to start?</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/graalvm-and-groovy-how-to-start/"></a></div></div></div><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="1 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/12.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">GR8Conf EU 2019 - what can you expect from my talks?</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/gr8conf-eu-2019-what-can-you-expect-from-my-talks/"></a></div></div></div><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="18 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/19.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Ratpack on GraalVM - how to start?</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/ratpack-graalvm-how-to-start/"></a></div></div></div></div></div></div></section><section id="comments"><div class="container py-5" data-debug="Scrolled to comments"><h2 class="disqus-comment-count" data-disqus-url="https://e.printstacktrace.blog/graalvm-groovy-grape-creating-native-image-of-standalone-script/">0 Comments</h2><div class="row"><div class="col-12 col-lg-3 order-lg-1 order-0"><div class="sticky-top" style="top:40px"><a class="gatr" href="https://grammarly.go2cloud.org/aff_c?offer_id=182&amp;aff_id=89563" data-type="banner" data-name="grammarly-01" target="_blank"><img class="d-none img-fluid d-lg-inline-block" data-lazy="/images/yml/grammarly-tower.png"></a></div></div><div class="col-12 col-lg-9 order-0 order-lg-0 order-1"><div id="disqus_thread"></div></div></div></div><script>const loadDisqus=e=>{var s,r;t=document,(s=t.createElement("script")).src="https://"+e+".disqus.com/embed.js",s.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(s)},disqusObserver=new IntersectionObserver(e=>{e.forEach(e=>{var t,s,r;e.intersectionRatio>0&&(t="eprintstacktrace",s=document,(r=s.createElement("script")).src="https://"+t+".disqus.com/embed.js",r.setAttribute("data-timestamp",+new Date),(s.head||s.body).appendChild(r),disqusObserver.unobserve(e.target))})});disqusObserver.observe(document.getElementById("disqus_thread"))</script></section></main><footer id="footer" data-debug="Scrolled to footer"><div class="container py-3 pt-5"><div class="row"><div class="col-12 col-lg-3"><h5>Popular categories</h5><ul class="list-unstyled list-categories"><li class="mb-2"><a class="gatr" href="/groovy-cookbook/" data-type="footer-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2 text-muted small">30</span></a></li><li class="mb-2"><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="footer-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2 text-muted small">9</span></a></li><li class="mb-2"><a class="gatr" href="/programmers-bookshelf/" data-type="footer-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2 text-muted small">6</span></a></li><li class="mb-2"><a class="gatr" href="/micronaut-cookbook/" data-type="footer-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2 text-muted small">5</span></a></li><li class="mb-2"><a class="gatr" href="/ratpack-cookbook/" data-type="footer-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/learning-java/" data-type="footer-category" data-name="Learning Java">Learning Java<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/jq-cookbook/" data-type="footer-category" data-name="jq cookbook">jq cookbook<span class="count ml-2 text-muted small">3</span></a></li><li class="mb-2"><a class="gatr" href="/how-to/" data-type="footer-category" data-name="How to">How to<span class="count ml-2 text-muted small">3</span></a></li><li class="mb-2"><a class="gatr" href="/blog-reports/" data-type="footer-category" data-name="Blog Reports">Blog Reports<span class="count ml-2 text-muted small">2</span></a></li></ul></div><div class="col-12 col-lg-5 latest-posts"><h5 class="mb-4">Latest posts</h5><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/things-you-might-dont-know-about-micronaut-framework/" data-type="latest-sidebar" data-name="Things You Might Don't Know About Micronaut Framework"><img class="rounded" src="/images/icons/the-mn-files.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/things-you-might-dont-know-about-micronaut-framework/" data-type="latest-sidebar" data-name="Things You Might Don't Know About Micronaut Framework">Things You Might Don't Know About Micronaut Framework</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2022-07-28T08:22:54.000Z">July 28, 2022</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/things-you-might-dont-know-about-micronaut-framework/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/these-10-new-features-make-groovy-4-0-awesome/" data-type="latest-sidebar" data-name="These 10 New Features Make Groovy 4.0 AWESOME!"><img class="rounded" src="/images/icons/groovy-4.0.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/these-10-new-features-make-groovy-4-0-awesome/" data-type="latest-sidebar" data-name="These 10 New Features Make Groovy 4.0 AWESOME!">These 10 New Features Make Groovy 4.0 AWESOME!</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2022-04-14T12:38:23.000Z">April 14, 2022</time></li><li>8 min. read</li><li><a href="https://e.printstacktrace.blog/these-10-new-features-make-groovy-4-0-awesome/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/how-to-generate-random-password-in-groovy/" data-type="latest-sidebar" data-name="How to generate a random password in Groovy?"><img class="rounded" src="/images/icons/28.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/how-to-generate-random-password-in-groovy/" data-type="latest-sidebar" data-name="How to generate a random password in Groovy?">How to generate a random password in Groovy?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2022-02-14T11:44:06.000Z">February 14, 2022</time></li><li>2 min. read</li><li><a href="https://e.printstacktrace.blog/how-to-generate-random-password-in-groovy/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/merging-json-files-recursively-in-the-command-line/" data-type="latest-sidebar" data-name="Merging JSON files recursively in the command-line"><img class="rounded" src="/images/icons/jq-merge-json.jpg" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/merging-json-files-recursively-in-the-command-line/" data-type="latest-sidebar" data-name="Merging JSON files recursively in the command-line">Merging JSON files recursively in the command-line</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-11-05T22:14:35.000Z">November 5, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/merging-json-files-recursively-in-the-command-line/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/jenkins-declarative-pipeline-dynamic-agent/" data-type="latest-sidebar" data-name="Jenkins Declarative Pipeline with the dynamic agent - how to configure it?"><img class="rounded" src="/images/icons/50.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/jenkins-declarative-pipeline-dynamic-agent/" data-type="latest-sidebar" data-name="Jenkins Declarative Pipeline with the dynamic agent - how to configure it?">Jenkins Declarative Pipeline with the dynamic agent - how to configure it?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-09-27T07:32:11.000Z">September 27, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/jenkins-declarative-pipeline-dynamic-agent/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)"><img class="rounded" src="/images/icons/3.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)">Groovy Ecosystem Usage Report (2020)</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-09-13T05:40:19.000Z">September 13, 2020</time></li><li>4 min. read</li><li><a href="https://e.printstacktrace.blog/groovy-ecosystem-usage-report-2020/#disqus_thread">0 Comments</a></li></ul></div></div></div></div><div class="col-12 col-lg-4"><h5>Popular tags</h5><div class="tags-cloud"><a href="/t/affiliate/" style="font-size:.8em;color:#6881a5">affiliate</a> <a href="/t/async/" style="font-size:.8em;color:#778196">async</a> <a href="/t/benchmark/" style="font-size:.8em;color:#6f819d">benchmark</a> <a href="/t/book/" style="font-size:.8em;color:#6081ac">book</a> <a href="/t/cicd/" style="font-size:.8em;color:#5082ba">cicd</a> <a href="/t/curl/" style="font-size:.8em;color:#6f819d">curl</a> <a href="/t/devops/" style="font-size:.8em;color:#5882b3">devops</a> <a href="/t/docker/" style="font-size:.8em;color:#6f819d">docker</a> <a href="/t/github/" style="font-size:.8em;color:#778196">github</a> <a href="/t/graalvm/" style="font-size:.8em;color:#5082ba">graalvm</a> <a href="/t/grails/" style="font-size:.8em;color:#778196">grails</a> <a href="/t/groovy/" style="font-size:.8em;color:#3982d0">groovy</a> <a href="/t/haskell/" style="font-size:.8em;color:#778196">haskell</a> <a href="/t/java/" style="font-size:.8em;color:#4182c9">java</a> <a href="/t/java-8/" style="font-size:.8em;color:#778196">java-8</a> <a href="/t/jenkins/" style="font-size:.8em;color:#4982c2">jenkins</a> <a href="/t/jenkins-pipeline/" style="font-size:.8em;color:#4982c2">jenkins-pipeline</a> <a href="/t/jmh/" style="font-size:.8em;color:#6881a5">jmh</a> <a href="/t/jq/" style="font-size:.8em;color:#6f819d">jq</a> <a href="/t/json/" style="font-size:.8em;color:#6f819d">json</a> <a href="/t/junit/" style="font-size:.8em;color:#778196">junit</a> <a href="/t/learning/" style="font-size:.8em;color:#6f819d">learning</a> <a href="/t/micronaut/" style="font-size:.8em;color:#5882b3">micronaut</a> <a href="/t/native-image/" style="font-size:.8em;color:#6881a5">native-image</a> <a href="/t/non-blocking/" style="font-size:.8em;color:#6f819d">non-blocking</a> <a href="/t/ratpack/" style="font-size:.8em;color:#5082ba">ratpack</a> <a href="/t/reactive-programming/" style="font-size:.8em;color:#778196">reactive-programming</a> <a href="/t/reading/" style="font-size:.8em;color:#778196">reading</a> <a href="/t/recursion/" style="font-size:.8em;color:#778196">recursion</a> <a href="/t/review/" style="font-size:.8em;color:#6081ac">review</a> <a href="/t/rxjava/" style="font-size:.8em;color:#778196">rxjava</a> <a href="/t/sdkman/" style="font-size:.8em;color:#6f819d">sdkman</a> <a href="/t/spock/" style="font-size:.8em;color:#6f819d">spock</a> <a href="/t/stackoverflow/" style="font-size:.8em;color:#778196">stackoverflow</a> <a href="/t/string/" style="font-size:.8em;color:#6f819d">string</a> <a href="/t/unit-test/" style="font-size:.8em;color:#6f819d">unit-test</a></div><div class="mt-5"><a class="gatr" href="https://www.bluehost.com/track/szymonstepniak/" data-type="banner" data-name="bluehost-02" target="_blank"><img class="d-none img-fluid d-lg-inline-block d-md-inline-block" data-lazy="/images/yml/bluehost-01.png"></a></div></div></div></div><div class="border-top border-dark py-4 footer-bottom"><div class="container"><div class="justify-content-between d-flex"><div class="links"><ul><li><a class="gatr" href="/about/" data-type="footer-link" data-name="About">About</a></li><li><a class="gatr" href="/archives/" data-type="footer-link" data-name="Archives">Archives</a></li><li><a class="gatr" href="/resources/" data-type="footer-link" data-name="Resources">Resources</a></li><li><a class="gatr" href="/privacy-policy/" data-type="footer-link" data-name="Privacy Policy">Privacy Policy</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://kit.co/wololock" data-type="footer-link" data-name="My Kit">My Kit</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://feeds.feedburner.com/Eprintstacktracenet" data-type="footer-link" data-name="RSS">RSS</a></li></ul></div><div class="socials"><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://twitter.com/wololock"><i class="fa fa-twitter"></i></a></li><li><a target="_blank" rel="noopener" href="https://youtube.com/eprintstacktrace"><i class="fa fa-youtube"></i></a></li><li><a target="_blank" rel="noopener" href="https://github.com/wololock"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile"><i class="fa fa-stack-overflow"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/szymon-st%C4%99pniak-9a0b1630/"><i class="fa fa-linkedin"></i></a></li></ul></div></div></div></div></footer><script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/48c5da59c9.js" crossorigin="anonymous" async></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#5fc4ff" data-font-family="Lora,serif" data-font-size="16px" data-bg="#1d2b36"></script><script src="/js/main.js?v=12"></script><script src="/js/highlightjs/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(e,a,t,n,c,i,g){e.GoogleAnalyticsObject=c,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=a.createElement(t),g=a.getElementsByTagName(t)[0],i.async=1,i.src="//www.google-analytics.com/analytics.js",g.parentNode.insertBefore(i,g)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery(document).on("mousedown",".gatr",(function(e){var a=jQuery(this),t=a.attr("data-type"),n=a.attr("data-name"),c=1===e.which?"click":2===e.which?"middle-click":"right-click";return ga("send","event",t,c,n),!1}))</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>